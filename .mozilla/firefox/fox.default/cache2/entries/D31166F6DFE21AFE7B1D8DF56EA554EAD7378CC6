function AdfCalendarDragSource(a,b){arguments.length&&this.Init(a,b)}AdfObject.createSubclass(AdfCalendarDragSource,AdfDragSource);AdfCalendarDragSource.prototype.Init=function(a,b){AdfCalendarDragSource.superclass.Init.call(this,a,b)};
AdfCalendarDragSource.prototype.isAvailable=function(a,b){AdfAssert.assertPrototype(a,AdfDnDContext);AdfAssert.assertPrototype(b,AdfUIInputEvent);AdfAssert.DEBUG&&AdfDnDContext.assertUserAction(a.getUserAction());return AdfPage.PAGE.isAttachmentMode()?!1:null!=this._getActivity(b)?!0:null!=AdfCalendarDragSource.superclass.GetDragTransferable.call(this,b)};
AdfCalendarDragSource.prototype.GetDragTransferable=function(a){var b=AdfCalendarDragSource.superclass.GetDragTransferable.call(this,a);if(a=this._getActivity(a)){var d=[],e=[];if(null!=b)for(var f=b.getTransferDataFlavors(),g=f.length,h=0;h<g;h++){var k=f[h];d.push(k);e.push(b.getTransferData(k))}b=AdfDataFlavor.getObjectFlavor(a);e.push([a]);d.push(b);return new AdfObjectTransferable(e,d)}return b};
AdfCalendarDragSource.prototype.GetDragOffset=function(a){var b=this._getActivity(a);return b?this.getComponent().getPeer().getDragOffsetForActivity(a,b):{x:a.getOffsetX(),y:a.getOffsetY()}};AdfCalendarDragSource.prototype.GetDragOverFeedback=function(a){AdfAssert.assertPrototype(a,AdfUIInputEvent);var b=this._getActivity(a);return b?this.getComponent().getPeer().getDragNodeForActivity(a,b):AdfCalendarDragSource.superclass.GetDragOverFeedback.call(this,a)};
AdfCalendarDragSource.prototype._getActivity=function(a){return this.getComponent().getPeer().getActivityForEvent(a)};AdfCalendarDragSource.prototype.dragDropEnd=function(a,b){return this.getComponent().getPeer().dragDropEnd(a,b)};
function AdfCalendarDropTarget(a,b){arguments.length&&this.Init(a,b)}AdfObject.createSubclass(AdfCalendarDropTarget,AdfDropTarget);
AdfCalendarDropTarget.prototype.Init=function(a,b){AdfCalendarDropTarget.superclass.Init.call(this);AdfAssert.assertNumber(a);AdfAssert.assert(a!=AdfDnDContext.ACTION_NONE,"allowedActions must be specified");AdfAssert.assert(0==(a&~AdfDnDContext.ACTIONS_ALL),"Invalid allowedActions:"+a);AdfAssert.assertArrayOrNull(b,"flovors must be null or an array");AdfPage.PAGE.isAttachmentMode()&&(a=0);this._allowedActions=a;this._allowedFlavors=b};
AdfCalendarDropTarget.prototype.toDebugString=function(){AdfAssert.assertNumber(this._allowedActions);return AdfCalendarDropTarget.superclass.toDebugString.call(this)+" allowedActions:"+this._allowedActions.toString(2)};AdfCalendarDropTarget.prototype.dragExit=function(a){AdfLogger.LOGGER.finer("dragExit:",this);this._cleanUpDragFeedback(a,!0)};
AdfCalendarDropTarget.prototype.drop=function(a,b,d,e){AdfLogger.LOGGER.finer("drop:",this);this._cleanUpDragFeedback(a,!1);var f=this.getComponent().getPeer(),g=a.getDropTargetProperty(AdfCalendarDropTarget._SITE_HINTS);null==g&&(g={},a.setDropTargetProperty(AdfCalendarDropTarget._SITE_HINTS,g));f.getDropSiteAndDataFromHints(a,d,e,g);f=g[AdfCalendarDropTarget.HINT_DROP_SITE];(new AdfDropEvent(this.getComponent(),a.getDragSource(),a.getTransferable(),b,d,e,AdfDropEvent.DROP_ORIENTATION_ON,f)).queue();
return b};
AdfCalendarDropTarget.prototype.AcceptDrag=function(a,b,d,e,f){var g=AdfDnDContext.ACTION_NONE;d=AdfCalendarDropTarget.superclass.AcceptDrag.call(this,a,b,d,e,f);if(d!=AdfDnDContext.ACTION_NONE){b=this.getComponent().getPeer();var h=a.getDropTargetProperty(AdfCalendarDropTarget._SITE_HINTS);null==h&&(h={},a.setDropTargetProperty(AdfCalendarDropTarget._SITE_HINTS,h));b.getDropSiteAndDataFromHints(a,e,f,h);var k=h[AdfCalendarDropTarget.HINT_DROP_SITE],l=h[AdfCalendarDropTarget.HINT_DROP_SITE_DATA];null!=
k&&(g=d);b.showDragFeedback(a,k,l,g,h[AdfCalendarDropTarget.HINT_LAST_DROP_SITE],h[AdfCalendarDropTarget.HINT_LAST_DROP_SITE_DATA],e,f,!1);h[AdfCalendarDropTarget.HINT_LAST_DROP_SITE]=k;h[AdfCalendarDropTarget.HINT_LAST_DROP_SITE_DATA]=l}return g};AdfCalendarDropTarget.prototype.GetAllowedFlavors=function(){var a=[];a.push(AdfDataFlavor.getDataFlavorForClassName(AdfObject.getTypeName(AdfCalendarActivity)));null!=this._allowedFlavors&&(a=a.concat(this._allowedFlavors));return a};
AdfCalendarDropTarget.prototype.GetAllowedActions=function(){return this._allowedActions};AdfCalendarDropTarget.prototype._cleanUpDragFeedback=function(a,b){var d=a.getDropTargetProperty(AdfCalendarDropTarget._SITE_HINTS),e=d?d[AdfCalendarDropTarget.HINT_LAST_DROP_SITE]:null,d=d?d[AdfCalendarDropTarget.HINT_LAST_DROP_SITE_DATA]:null;this.getComponent().getPeer().showDragFeedback(a,null,null,AdfDnDContext.ACTION_NONE,e,d,null,b)};AdfCalendarDropTarget._SITE_HINTS="siteHints";
AdfCalendarDropTarget.HINT_LAST_DROP_SITE="lastDropSite";AdfCalendarDropTarget.HINT_LAST_DROP_SITE_DATA="lastDropSiteData";AdfCalendarDropTarget.HINT_DROP_SITE="dropSite";AdfCalendarDropTarget.HINT_DROP_SITE_DATA="dropSiteData";
AdfUIComponents.createComponentClass("AdfUICalendar",{componentType:"oracle.adf.Calendar",propertyKeys:[{name:"value",type:"Object",secured:!0}]});
function AdfCalendarDisplayChangeEvent(a,b,d){this.Init(a,b,d)}AdfObject.createSubclass(AdfCalendarDisplayChangeEvent,AdfComponentEvent);AdfCalendarDisplayChangeEvent.EVENT_TYPE="calendarDisplayChange";AdfCalendarDisplayChangeEvent.DATE_TODAY="today";AdfCalendarDisplayChangeEvent.DATE_NEXT="next";AdfCalendarDisplayChangeEvent.DATE_PREVIOUS="previous";
AdfCalendarDisplayChangeEvent.prototype.Init=function(a,b,d){AdfAssert.assertPrototype(a,AdfUIComponent);AdfCalendarDisplayChangeEvent.superclass.Init.call(this,a,AdfCalendarDisplayChangeEvent.EVENT_TYPE);this._newActiveDay=b;this._newView=d;this.setRoot(a)};AdfCalendarDisplayChangeEvent.prototype.AddMarshalledProperties=function(a){a.newActiveDay=this._newActiveDay;a.newView=this._newView};AdfCalendarDisplayChangeEvent.prototype.propagatesToServer=function(){return!0};
AdfCalendarDisplayChangeEvent.queue=function(a,b,d){(new AdfCalendarDisplayChangeEvent(a,b,d)).queue(!0)};
function AdfCalendarActivityEvent(a,b,d,e,f,g,h){this.Init(a,b,d,e,f,g,h)}AdfObject.createSubclass(AdfCalendarActivityEvent,AdfComponentEvent);AdfCalendarActivityEvent.EVENT_TYPE="calendarActivity";
AdfCalendarActivityEvent.prototype.Init=function(a,b,d,e,f,g,h){AdfAssert.assertPrototype(a,AdfUIComponent);AdfAssert.assertString(b);AdfAssert.assertString(d);AdfCalendarActivityEvent.superclass.Init.call(this,a,AdfCalendarActivityEvent.EVENT_TYPE);this._providerId=b;this._activityId=d;this._keyStroke=e;this._clickCount=f;this._button=g;this._triggerType=h;this.setRoot(a)};AdfCalendarActivityEvent.prototype.propagatesToServer=function(){return!0};
AdfCalendarActivityEvent.prototype.AddMarshalledProperties=function(a){a.providerId=this._providerId;a.activityId=this._activityId;a.keyStroke=this._keyStroke;a.clickCount=this._clickCount;a.button=this._button;a.triggerType=this._triggerType};AdfCalendarActivityEvent.queue=function(a,b,d,e,f,g,h){(new AdfCalendarActivityEvent(a,b,d,e,f,g,h)).queue(!0)};
function AdfCalendarEvent(a,b,d,e,f,g,h,k){this.Init(a,b,d,e,f,g,h,k)}AdfObject.createSubclass(AdfCalendarEvent,AdfComponentEvent);AdfCalendarEvent.EVENT_TYPE="calendar";AdfCalendarEvent.prototype.Init=function(a,b,d,e,f,g,h,k){AdfAssert.assertPrototype(a,AdfUIComponent);AdfCalendarEvent.superclass.Init.call(this,a,AdfCalendarEvent.EVENT_TYPE);this._triggerDate=b;this._triggerHour=d;this._triggerMin=e;this._keyStroke=f;this._clickCount=g;this._button=h;this._triggerType=k;this.setRoot(a)};
AdfCalendarEvent.prototype.propagatesToServer=function(){return!0};AdfCalendarEvent.prototype.AddMarshalledProperties=function(a){a.triggerDate=this._triggerDate;a.triggerHour=this._triggerHour;a.triggerMin=this._triggerMin;a.keyStroke=this._keyStroke;a.clickCount=this._clickCount;a.button=this._button;a.triggerType=this._triggerType};AdfCalendarEvent.queue=function(a,b,d,e,f,g,h,k){(new AdfCalendarEvent(a,b,d,e,f,g,h,k)).queue(!0)};
function AdfCalendarActivityDurationChangeEvent(a,b,d,e,f,g){this.Init(a,b,d,e,f,g)}AdfObject.createSubclass(AdfCalendarActivityDurationChangeEvent,AdfComponentEvent);AdfCalendarActivityDurationChangeEvent.EVENT_TYPE="calendarActivityDurationChange";
AdfCalendarActivityDurationChangeEvent.prototype.Init=function(a,b,d,e,f,g){AdfAssert.assertPrototype(a,AdfUIComponent);AdfAssert.assertString(b);AdfAssert.assertString(d);AdfCalendarActivityDurationChangeEvent.superclass.Init.call(this,a,AdfCalendarActivityDurationChangeEvent.EVENT_TYPE);this._providerId=b;this._activityId=d;this._endHourDelta=e;this._endMinDelta=f;this._triggerDate=g;this.setRoot(a)};AdfCalendarActivityDurationChangeEvent.prototype.propagatesToServer=function(){return!0};
AdfCalendarActivityDurationChangeEvent.prototype.AddMarshalledProperties=function(a){a.providerId=this._providerId;a.activityId=this._activityId;null!=this._endHourDelta&&(a.endHourDelta=this._endHourDelta);null!=this._endMinDelta&&(a.endMinDelta=this._endMinDelta);null!=this._triggerDate&&(a.triggerDate=this._triggerDate)};AdfCalendarActivityDurationChangeEvent.queue=function(a,b,d,e,f,g){(new AdfCalendarActivityDurationChangeEvent(a,b,d,e,f,g)).queue(!0)};
function AdfCalendarActivity(a,b,d){this.Init(a,b,d)}AdfObject.createSubclass(AdfCalendarActivity);AdfCalendarActivity.prototype.Init=function(a,b,d){AdfCalendarActivity.superclass.Init.call(this);this._providerId=a;this._activityId=b;this._allDay=d};AdfCalendarActivity.prototype.getProviderId=function(){return this._providerId};AdfCalendarActivity.prototype.getActivityId=function(){return this._activityId};AdfCalendarActivity.prototype.isAllDay=function(){return this._allDay};
AdfUIComponents.createComponentClass("AdfRichCalendar",{componentType:"oracle.adf.RichCalendar",propertyKeys:[{name:"inlineStyle",type:"String"},{name:"styleClass",type:"String"},{name:"shortDesc",type:"String"},{name:"unsecure",type:"Object",secured:!0},{name:"visible",type:"Boolean","default":!0},{name:"persist",type:"Array"},{name:"dontPersist",type:"Array"},{name:"view",type:"String","default":"month"},{name:"activeDay",type:"Date",secured:!0},{name:"availableViews",type:"Array"},{name:"allDayActivityOrder",
type:"Array"},{name:"dateCustomizer",type:"Object",secured:!0},{name:"dateVar",type:"String","default":"dateVar"},{name:"dateVarStatus",type:"String","default":"dateVarStatus"},{name:"startHour",type:"Number","default":8},{name:"listType",type:"String","default":"dayCount"},{name:"listCount",type:"Number","default":14},{name:"startDayOfWeek",type:"String"},{name:"showActivityTypes",type:"Array"},{name:"timeZone",type:"Object",secured:!0},{name:"hourZoom",type:"String","default":"1"},{name:"timeSlotsPerHour",
type:"String","default":"auto"},{name:"toolboxLayout",type:"Array"},"calendarActivityListener","calendarDisplayChangeListener","calendarListener","calendarActivityDurationChangeListener",{name:"splitterCollapsed",type:"Boolean","default":!1},{name:"splitterPosition",type:"String","default":"auto"}],eventNames:["calendarActivity","calendarDisplayChange","calendar","calendarActivityDurationChange"],namingContainer:!0,superclass:AdfUICalendar});
AdfRichCalendar.prototype.isEventRoot=function(){return!0};
AdfRichUIPeer.createPeerClass(AdfRichUIPeer,"AdfDhtmlCalendarPeer",!1);
AdfDhtmlCalendarPeer.prototype.InitDomElement=function(a,b){AdfDhtmlCalendarPeer.superclass.InitDomElement.call(this,a,b);AdfDomUtils.isInVisibleSubtree(b)&&(this._restoreScrollPosition(a,b),this.isScrollRestored=!0);this._nextZIndex=10;if(null!=a.getDropTarget()&&null==a.getDragSource()){var d=new AdfCalendarDragSource(AdfDnDContext.ACTION_MOVE,AdfDnDContext.ACTION_MOVE);a.setDragSource(d)}this._splitterid=a.getClientId()+AdfDhtmlCalendarPeer._NAMING_SEP+AdfDhtmlCalendarPeer._SPLITTER_COMPONENT_ID;
if(d=AdfAgent.AGENT.getElementById(this._splitterid))d.style.top=d.parentNode.firstChild.offsetHeight+"px"};AdfDhtmlCalendarPeer.prototype.ComponentRemoved=function(a){this._saveScrollAndSplitterPosition(a);this._killCalendarActivityMouseTimeout();AdfDhtmlCalendarPeer.superclass.ComponentRemoved.call(this,a)};
AdfDhtmlCalendarPeer.InitSubclass=function(){AdfRichUIPeer.addComponentEventHandlers(this,AdfUIInputEvent.MOUSE_DOWN_EVENT_TYPE,AdfUIInputEvent.CLICK_EVENT_TYPE,AdfUIInputEvent.DOUBLE_CLICK_EVENT_TYPE,AdfActionEvent.ACTION_EVENT_TYPE,AdfUIInputEvent.KEY_UP_EVENT_TYPE,AdfUIInputEvent.KEY_DOWN_EVENT_TYPE,AdfComponentEvent.CONTEXT_MENU_EVENT_TYPE);AdfAgent.AGENT.getCapabilities()[AdfAgent.CAP_TOUCH_SCREEN]==AdfAgent.CAP_TOUCH_SCREEN_NONE&&AdfRichUIPeer.addComponentEventHandlers(this,AdfUIInputEvent.MOUSE_IN_EVENT_TYPE);
this._CALENDAR_ACTIVITY_KEY="_adfAct";this._CALENDAR_ACTIVITY_ALL_DAY_KEY="_adfActAD";this._CALENDAR_ACTIVITY_DURATION_KEY="_adfActDu";this._CALENDAR_DAY_KEY="_adfDay";this._CALENDAR_DAY_CELL_KEY="_adfDyCl";this._CALENDAR_ACTIVE_DATE_KEY="_adfActive";this._CALENDAR_TIME_SLOT_KEY="_adfTm";this._RESIZE_TIME_INDICATOR_KEY="_adfRi";this._RESIZE_All_DAY_INDICATOR_KEY="_adfRiAD";this._KILL_HOVER_INDICATOR_KEY="_adfNoHov";this._ALL_DAY_DURATION_TEXT_KEY="_adDurtxt";this._ALL_DAY_HEADER_TEXT_KEY="_adHdtxt";
this._HAS_CALENDAR_DAY_LINK="_adfcdl";this._TIME_ACTIVITY_COLUMN_KEY="_adfTmAtCm";this._SCROLL_DAY_KEY="scrDay";this._SCROLL_LIST_KEY="scrList";this._SCROLL_START_HOUR="stHr";this._ALL_DAY_CONTAINER_SUB_ID="allDayC";this._SPLITTER_COMPONENT_ID="_adfCalSp";this._START_HOUR_SUBID_KEY="startHour";this._FACET_ID_ACTIVITY_HOVER="_adfIdAH";this._FACET_ID_ACTIVITY_DETAIL="_adfIdATL";this._FACET_ID_ACTIVITY_CONTEXT_MENU="_adfIdACM";this._FACET_ID_ACTIVITY_DELETE="_adfIdAD";this._FACET_ID_CREATE="_adfIdC";
this._FACET_ID_CONTEXT_MENU="_adfIdCM";this._VIEW_KEY="view";this._VIEW_DAY="day";this._VIEW_WEEK="week";this._VIEW_MONTH="month";this._VIEW_LIST="list";this._TIME_SLOTS_PER_HOUR="timeSlotsPerHour";this._SCROLL_DAY_HEIGHT="scrDayHeight";this._ALLDAY="ALLDAY";this._TIME="TIME";this._DURATION="DURATION";this._VIEW_BUTTON_ID_DAY="_adfCalDV";this._VIEW_BUTTON_ID_WEEK="_adfCalWV";this._VIEW_BUTTON_ID_MONTH="_adfCalMV";this._VIEW_BUTTON_ID_LIST="_adfCalLV";this._DATE_BUTTON_ID_TODAY="_adfCalTD";this._DATE_BUTTON_ID_PREVIOUS=
"_adfCalPD";this._DATE_BUTTON_ID_NEXT="_adfCalND";this._EVENT_TRIGGER_MOUSE="MOUSE";this._EVENT_TRIGGER_FOCUS="FOCUS";this._EVENT_TRIGGER_KEY="KEY";this._EVENT_TRIGGER_HOVER="HOVER";this._EVENT_TRIGGER_CONTEXT_MENU="CONTEXT_MENU";this._EVENT_BUTTON_NONE="NONE";this._EVENT_BUTTON_LEFT="LEFT";this._EVENT_BUTTON_MIDDLE="MIDDLE";this._EVENT_BUTTON_RIGHT="RIGHT";this._MONTH_GRID_ID="mg";this._MONTH_HEADER_ID="mh";this._CAL_MONTH_OVERFLOW_LINK="ol";this._CAL_MONTH_TIMED_ACTIVITY_WRAPPER="taw";this._CAL_MONTH_OVERFLOW_LINK_CLASS=
"af|calendar::month-overflow-link";this._CAL_MONTH_OVERFLOW_LINK_WRAPPER_CLASS="af|calendar::month-overflow-link-wrapper";this._CAL_MONTH_NUM_OVERFLOW="no";this._CAL_MONTH_OVERFLOW_LINK_TEXT="af_calendar.LABEL_OVERFLOW";this._MONTH_ROW_ID="_adfCalMR";this._CALENDAR_WEEK_TIMED_ACTIVITIES_CELL_SUB_ID="tact";this._CALENDAR_WEEK_HEADER_ID="wh";this._CAL_WEEK_FOCUS_FIRST_ALLDAY=0;this._CAL_WEEK_FOCUS_LAST_ALLDAY=1;this._CAL_ACT_COL_NUM="arc";this._CAL_ACT_ROW_NUM="arw";this._DROP_TARGET_CLASS="p_AFDropTarget";
this._DRAG_SOURCE_CLASS="p_AFDragSource";this._DRAG_END_CLASS="p_AFDragEnd";this._MOVEABLE_CLASS="p_AFMoveable";this._AUTOSCROLL_MARGIN=20;this._PADDING_AFTER_ALL_DAY_ACTIVITIES=15;this._NAMING_SEP=":";this._MONTH_VIEW_ALLDAY_HT="af|calendar-tr-month-all-day-activity-height"};
AdfDhtmlCalendarPeer.prototype.HandleComponentContextMenu=function(a){var b=a.getNativeEventTarget();if(b){var d=this.getDomElement(),e=this._getParentActivity(d,b);e&&d!=e?this._handleActivityContextMenu(a,d,e,!1):(e=this._getComponentEventSource(a),this._queueCalendarEvent(e,a,d,b,null,0,AdfDhtmlCalendarPeer._EVENT_BUTTON_NONE,AdfDhtmlCalendarPeer._EVENT_TRIGGER_CONTEXT_MENU)&&this._showContextMenu(e,d,a,AdfDhtmlCalendarPeer._FACET_ID_CONTEXT_MENU))}};
AdfDhtmlCalendarPeer.prototype.HandleComponentMouseDown=function(a){var b=a.getNativeEventTarget(),d=AdfAgent.AGENT;delete this._eatMouseClick;var e=d.getAttribute(b,AdfDhtmlCalendarPeer._RESIZE_TIME_INDICATOR_KEY),b=d.getAttribute(b,AdfDhtmlCalendarPeer._RESIZE_All_DAY_INDICATOR_KEY);if(a.isLeftButtonPressed()&&(e||b))this._hideActivityHoverPopup(),e?this._handleTimeResizeIndicatorMouseDown(a):this._handleAlldayResizeIndicatorMouseDown(a),a.cancel(),a.stopBubbling(),this._eatMouseClick=!0};
AdfDhtmlCalendarPeer.prototype.HandleComponentMouseOver=function(a){var b=this.getDomElement(),d=this.getComponent(),e=a.getNativeEventTarget(),f=this._getParentActivity(b,e);this._changeCursorForMovableActivity(d,f);if(a=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._FACET_ID_ACTIVITY_HOVER)){var g=!1;1==e.nodeType&&"IMG"==e.tagName&&(g=!0);g||(g=this._getParentWithAttr(f,e,AdfDhtmlCalendarPeer._KILL_HOVER_INDICATOR_KEY));if(g)this._killCalendarActivityMouseTimeout();else if(f&&b!=f){if(b=f.id,
e=this._calendarActivityMouseId,(f=this._calendarActivityMouseTimeout)&&(e&&e!=b)&&this._killCalendarActivityMouseTimeout(),null==f&&(!this._resizedActivity&&!this._draggedActivity)&&(a=d.findComponent(a),null==e||e!=b||!a.isPopupVisible()))this._calendarActivityMouseId=b,d={componentId:d.getClientId(),activityRootId:b},this._calendarActivityMouseTimeout=page.scheduleTimer(this,this._onMouseOverTimeout,d,1E3)}else null!=this._calendarActivityMouseId&&this._killCalendarActivityMouseTimeout()}};
AdfDhtmlCalendarPeer.prototype.HandleComponentClick=function(a){this._eatMouseClick||this._handleClickEvents(a,1)};AdfDhtmlCalendarPeer.prototype.HandleComponentDblClick=function(a){this._handleClickEvents(a,2)};
AdfDhtmlCalendarPeer.prototype.HandleComponentKeyDown=function(a){var b=a.getNativeEvent(),d=b.keyCode;if(AdfKeyStroke.ENTER_KEY==d||AdfKeyStroke.M_KEY==d){var e=this.getDomElement(),f=a.getNativeEventTarget();if((f=this._getParentActivity(e,f))&&e!=f)AdfKeyStroke.M_KEY==d&&b.ctrlKey&&b.altKey?this._handleActivityContextMenu(a,e,f,!0):AdfKeyStroke.ENTER_KEY==d&&(b=this.getComponent(),a=a.getKeyStroke(),this._queueCalendarActivityEvent(b,f,a,0,AdfDhtmlCalendarPeer._EVENT_BUTTON_NONE,AdfDhtmlCalendarPeer._EVENT_TRIGGER_KEY),
this._launchPopupFacet(b,AdfDhtmlCalendarPeer._FACET_ID_ACTIVITY_DETAIL))}};
AdfDhtmlCalendarPeer.prototype.HandleComponentKeyUp=function(a){var b=this.getDomElement(),d=a.getNativeEventTarget(),e=this._getParentActivity(b,d),f=this.getComponent().getProperty(AdfDhtmlCalendarPeer._VIEW_KEY),g=this.getComponent(),h=a.getKeyStroke();a=a.getKeyCode();if(e&&b!=e){if(AdfKeyStroke.TAB_KEY==a||AdfKeyStroke.ARROWDOWN_KEY==a||AdfKeyStroke.ARROWUP_KEY==a||AdfKeyStroke.ARROWRIGHT_KEY==a||AdfKeyStroke.ARROWLEFT_KEY==a){if(f==AdfDhtmlCalendarPeer._VIEW_MONTH)return this._handleKeyUpForMonth(a,
e);if(f==AdfDhtmlCalendarPeer._VIEW_WEEK)return this._handleKeyUpForWeek(a,e);if(f==AdfDhtmlCalendarPeer._VIEW_DAY)return this._handleKeyUpForDay(a,e);if(f==AdfDhtmlCalendarPeer._VIEW_LIST)return this._handleKeyUpForList(a,e)}AdfKeyStroke.ENTER_KEY!=a&&(this._queueCalendarActivityEvent(g,e,h,0,AdfDhtmlCalendarPeer._EVENT_BUTTON_NONE,AdfDhtmlCalendarPeer._EVENT_TRIGGER_KEY),AdfKeyStroke.DELETE_KEY==a&&this._launchPopupFacet(g,AdfDhtmlCalendarPeer._FACET_ID_ACTIVITY_DELETE))}else if(f==AdfDhtmlCalendarPeer._VIEW_WEEK){if(null!=
AdfAgent.AGENT.getAttribute(d,AdfDhtmlCalendarPeer._CALENDAR_DAY_KEY))return this._handleKeyUpForWeek(a,d)}else if(f==AdfDhtmlCalendarPeer._VIEW_MONTH){if(null!=AdfAgent.AGENT.getAttribute(d,AdfDhtmlCalendarPeer._CALENDAR_DAY_KEY))return this._handleKeyUpForMonth(a,d)}else if(f==AdfDhtmlCalendarPeer._VIEW_LIST&&null!=AdfAgent.AGENT.getAttribute(d,AdfDhtmlCalendarPeer._CALENDAR_DAY_KEY))return this._handleKeyUpForList(a,d)};
AdfDhtmlCalendarPeer.prototype.HandleComponentAction=function(a){var b=this.getComponent(),d=b.getClientId(),e=this._getComponentEventSource(a).getClientId();d+AdfDhtmlCalendarPeer._NAMING_SEP+AdfDhtmlCalendarPeer._VIEW_BUTTON_ID_DAY==e?this._actionToDisplayChange(a,b,AdfDhtmlCalendarPeer._VIEW_DAY):d+AdfDhtmlCalendarPeer._NAMING_SEP+AdfDhtmlCalendarPeer._VIEW_BUTTON_ID_WEEK==e?this._actionToDisplayChange(a,b,AdfDhtmlCalendarPeer._VIEW_WEEK):d+AdfDhtmlCalendarPeer._NAMING_SEP+AdfDhtmlCalendarPeer._VIEW_BUTTON_ID_MONTH==
e?this._actionToDisplayChange(a,b,AdfDhtmlCalendarPeer._VIEW_MONTH):d+AdfDhtmlCalendarPeer._NAMING_SEP+AdfDhtmlCalendarPeer._VIEW_BUTTON_ID_LIST==e?this._actionToDisplayChange(a,b,AdfDhtmlCalendarPeer._VIEW_LIST):d+AdfDhtmlCalendarPeer._NAMING_SEP+AdfDhtmlCalendarPeer._DATE_BUTTON_ID_TODAY==e?this._actionToDisplayChange(a,b,null,AdfCalendarDisplayChangeEvent.DATE_TODAY):d+AdfDhtmlCalendarPeer._NAMING_SEP+AdfDhtmlCalendarPeer._DATE_BUTTON_ID_NEXT==e?this._actionToDisplayChange(a,b,null,AdfCalendarDisplayChangeEvent.DATE_NEXT):
d+AdfDhtmlCalendarPeer._NAMING_SEP+AdfDhtmlCalendarPeer._DATE_BUTTON_ID_PREVIOUS==e&&this._actionToDisplayChange(a,b,null,AdfCalendarDisplayChangeEvent.DATE_PREVIOUS)};AdfDhtmlCalendarPeer.prototype.handleMonthOverflowLinkClick=function(){return!1};AdfDhtmlCalendarPeer.prototype.needsResizeNotify=function(){var a=this.getComponent().getProperty(AdfDhtmlCalendarPeer._VIEW_KEY);if(a==AdfDhtmlCalendarPeer._VIEW_MONTH||a==AdfDhtmlCalendarPeer._VIEW_DAY||a==AdfDhtmlCalendarPeer._VIEW_WEEK)return!0};
AdfDhtmlCalendarPeer.prototype.resizeNotify=function(a,b,d,e,f){b=this.getComponent().getProperty(AdfDhtmlCalendarPeer._VIEW_KEY);f!=d&&(b==AdfDhtmlCalendarPeer._VIEW_DAY?this._resizeAllDayActsArea(d,f):b==AdfDhtmlCalendarPeer._VIEW_WEEK?this._resizeAllDayActsArea(d,f):b==AdfDhtmlCalendarPeer._VIEW_MONTH&&this._resizeMonthGrid(d,f),this.isScrollRestored||(this._restoreScrollPosition(a,this.getDomElement()),this.isScrollRestored=!0))};
AdfDhtmlCalendarPeer.prototype.showActivityPopup=function(a,b,d){var e=this.getComponent();a=e.findComponent(a);b=e.getClientId()+"::"+b+"::"+d;if(b=AdfAgent.AGENT.getElementById(b))d={},d[AdfDhtmlPopupHints.ALIGN_ELEMENT]=b,d[AdfRichPopup.HINT_ALIGN]=AdfRichPopup.ALIGN_AFTER_START,d[AdfDhtmlPopupHints.AUTODISMISS]=AdfDhtmlPopupHints.AUTODISMISS_MOUSEOUT,d[AdfDhtmlPopupHints.AUTODISMISS_MOUSEOUT_ID]=b,a.show(d)};
AdfDhtmlCalendarPeer.prototype.getActivityForEvent=function(a){if(this._resizedActivity)return null;var b=a.getNativeEventTarget(),d=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._RESIZE_TIME_INDICATOR_KEY);d||(d=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._RESIZE_All_DAY_INDICATOR_KEY));if(d)return null;d=this.getComponent();b=d.getProperty(AdfDhtmlCalendarPeer._VIEW_KEY);if(b==AdfDhtmlCalendarPeer._VIEW_LIST)return null;var e=a.getNativeEventTarget();a=this.getDomElement();var e=this._getParentActivity(a,
e),f=null!=e&&null!=AdfAgent.AGENT.getAttribute(e,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_DURATION_KEY),d=-1==d.getShowActivityTypes().indexOf(AdfDhtmlCalendarPeer._TIME);return b==AdfDhtmlCalendarPeer._VIEW_DAY&&f&&d?null:e&&a!=e?(b=this._getProviderAndActivityIdFromElement(e),d=null!=AdfAgent.AGENT.getAttribute(e,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_ALL_DAY_KEY),new AdfCalendarActivity(b.providerId,b.activityId,d)):null};
AdfDhtmlCalendarPeer.prototype.getDragNodeForActivity=function(a,b){var d=this.getComponent(),e=AdfAgent.AGENT;this._hideActivityHoverPopup();d=d.getClientId()+"::"+b.getProviderId()+"::"+b.getActivityId();(d=e.getElementById(d))||(d=this._getParentActivity(this.getDomElement(),a.getNativeEventTarget()));this._draggedActivity=d;var f=d.cloneNode(!0);e.copyStyle(d,f);e=f.style;e.left=e.top="0px";e.height=d.clientHeight+"px";var g=null,h=null;if(b.isAllDay())for(var g=f.getElementsByTagName("span"),
k=g.length,l=0;l<k;l++){var m=g[l];if(null!=m.getAttribute(AdfDhtmlCalendarPeer._ALL_DAY_DURATION_TEXT_KEY)){h=m;break}}null!=h?this._resizeDragNodeForAllDayActivity(d,e,g,h):e.width=d.clientWidth+"px";AdfDomUtils.addCSSClassName(d,AdfDhtmlCalendarPeer._DRAG_SOURCE_CLASS);return f};AdfDhtmlCalendarPeer.prototype.dragDropEnd=function(a,b){var d=this._draggedActivity;d&&(b==AdfDnDContext.ACTION_NONE&&AdfDomUtils.removeCSSClassName(d,AdfDhtmlCalendarPeer._DRAG_SOURCE_CLASS),this._draggedActivity=null)};
AdfDhtmlCalendarPeer.prototype.getDragOffsetForActivity=function(a,b){var d=AdfAgent.AGENT,e=this.getComponent().getClientId()+"::"+b.getProviderId()+"::"+b.getActivityId();(e=d.getElementById(e))||(e=this._getParentActivity(this.getDomElement(),a.getNativeEventTarget()));e=d.getElementPosition(e);d=d.getMousePosition(a.getNativeEvent());xOffset=d.x-e.x;yOffset=d.y-e.y;return{x:xOffset,y:yOffset}};
AdfDhtmlCalendarPeer.prototype.getDropSiteAndDataFromHints=function(a,b,d,e){AdfAssert.assertNumber(b);AdfAssert.assertNumber(d);AdfAssert.assert(null!=e);var f=e[AdfCalendarDropTarget.HINT_LAST_DROP_SITE],g=e[AdfCalendarDropTarget.HINT_LAST_DROP_SITE_DATA];if(f&&g){var h=g.bounds;AdfAssert.assertObject(h);if(b>=h.left&&d>=h.top&&b<=h.right&&d<=h.bottom){e[AdfCalendarDropTarget.HINT_DROP_SITE]=f;e[AdfCalendarDropTarget.HINT_DROP_SITE_DATA]=g;return}}this._getDropSiteAndData(a,b,d,e)};
AdfDhtmlCalendarPeer.prototype.showDragFeedback=function(a,b,d,e,f,g){f!=b&&(null!=f&&(AdfAssert.assertObject(g),AdfAssert.assertDomElement(g.domElement),AdfDomUtils.removeCSSClassName(g.domElement,AdfDhtmlCalendarPeer._DROP_TARGET_CLASS),g.siteDayCell&&AdfDomUtils.removeCSSClassName(g.siteDayCell,AdfDhtmlCalendarPeer._DROP_TARGET_CLASS)),null!=b&&(AdfAssert.assertObject(d),AdfAssert.assertDomElement(d.domElement),AdfDomUtils.addCSSClassName(d.domElement,AdfDhtmlCalendarPeer._DROP_TARGET_CLASS),d.siteDayCell&&
AdfDomUtils.addCSSClassName(d.siteDayCell,AdfDhtmlCalendarPeer._DROP_TARGET_CLASS)))};
AdfDhtmlCalendarPeer.prototype._resizeDragNodeForAllDayActivity=function(a,b,d,e){var f=AdfAgent.AGENT;e.style.display="";for(var g=d.length,h=0;h<g;h++){var k=d[h];null==f.getAttribute(k,AdfDhtmlCalendarPeer._ALL_DAY_HEADER_TEXT_KEY)&&(k!==e&&!AdfDomUtils.isAncestor(k,e))&&(k.style.display="none")}d=a.parentNode.childNodes;g=d.length;for(h=0;h<g;h++)if(a=d[h],null!=f.getAttribute(a,AdfDhtmlCalendarPeer._CALENDAR_DAY_CELL_KEY)){b.width=a.clientWidth+"px";break}};
AdfDhtmlCalendarPeer.prototype._getDropSiteAndData=function(a,b,d,e){var f=this.getComponent().getProperty(AdfDhtmlCalendarPeer._VIEW_KEY),g=!1;f==AdfDhtmlCalendarPeer._VIEW_DAY?g=this._getDropSiteAndDataForDayView(a,b,d,e):f==AdfDhtmlCalendarPeer._VIEW_WEEK?g=this._getDropSiteAndDataForWeekView(a,b,d,e):f==AdfDhtmlCalendarPeer._VIEW_MONTH&&(g=this._getDropSiteAndDataForMonthView(a,b,d,e));g||(e[AdfCalendarDropTarget.HINT_DROP_SITE]=null,e[AdfCalendarDropTarget.HINT_DROP_SITE_DATA]=null)};
AdfDhtmlCalendarPeer.prototype._getDragSourceActivity=function(a){if(a=a.getTransferable())if(a=a.getTransferData(AdfDataFlavor.OBJECT_FLAVOR),null!=a)for(var b=a.length,d=0;d<b;d++){var e=a[d];if(e instanceof AdfCalendarActivity)return e}return null};
AdfDhtmlCalendarPeer.prototype._getDropSiteAndDataForDayView=function(a,b,d,e){var f=AdfAgent.AGENT,g=this.getComponent();a=this._getDragSourceActivity(a,b,d);var h=!1;if(this._isAllDayRegionDisplayed()){var k=g.getClientId(),k=AdfRichUIPeer.CreateSubId(k,AdfDhtmlCalendarPeer._ALL_DAY_CONTAINER_SUB_ID),k=f.getElementById(k);AdfAssert.assertDomElement(k);f.pointInElementBounds(k,b,d)&&!a&&(h={},h.date=f.getAttribute(k,AdfDhtmlCalendarPeer._CALENDAR_DAY_CELL_KEY),h.timeType=-1!=g.getShowActivityTypes().indexOf(AdfDhtmlCalendarPeer._ALLDAY)?
AdfDhtmlCalendarPeer._ALLDAY:AdfDhtmlCalendarPeer._DURATION,e[AdfCalendarDropTarget.HINT_DROP_SITE]=h,dropSiteData={},dropSiteData.domElement=k,dropSiteData.bounds=f.getElementPageBounds(k),e[AdfCalendarDropTarget.HINT_DROP_SITE_DATA]=dropSiteData,h=!0)}if(!h&&(!a||!a.isAllDay()))h=this._getDropSiteAndDataForTimedDayView(b,d,e);return h};
AdfDhtmlCalendarPeer.prototype._isAllDayRegionDisplayed=function(){var a=this.getComponent().getShowActivityTypes();return-1!=a.indexOf(AdfDhtmlCalendarPeer._ALLDAY)||-1!=a.indexOf(AdfDhtmlCalendarPeer._DURATION)&&-1!=a.indexOf(AdfDhtmlCalendarPeer._TIME)};
AdfDhtmlCalendarPeer.prototype._getDropSiteAndDataForTimedDayView=function(a,b,d){var e=AdfAgent.AGENT,f=null,g=this._getDateTimeGridContainer(),h=g.scrollTop,k=g.firstChild.rows[0].cells[1].firstChild,g=k.childNodes,l=g.length;if(e.pointInElementBounds(k,a,b))for(i=0;i<l;i++)if(k=g[i],f||(f=e.getAttribute(k,AdfDhtmlCalendarPeer._CALENDAR_DAY_CELL_KEY)),k.offsetTop+k.offsetHeight>h){var m=e.getAttribute(k,AdfDhtmlCalendarPeer._CALENDAR_TIME_SLOT_KEY);if(null!=m&&e.pointInElementBounds(k,a,b))return d[AdfCalendarDropTarget.HINT_DROP_SITE]=
this._getDropSiteForTimeSlot(f,m),a={},a.domElement=k,a.bounds=e.getElementPageBounds(k),d[AdfCalendarDropTarget.HINT_DROP_SITE_DATA]=a,!0}return!1};AdfDhtmlCalendarPeer.prototype._getDropSiteForTimeSlot=function(a,b){var d={},e=this._getTimeSlotsPerHour();d.date=a;d.hour=Math.round(b/e-0.5);d.min=b%e*(60/e);d.timeType=-1!=this.getComponent().getShowActivityTypes().indexOf(AdfDhtmlCalendarPeer._TIME)?AdfDhtmlCalendarPeer._TIME:AdfDhtmlCalendarPeer._DURATION;return d};
AdfDhtmlCalendarPeer.prototype._getDropSiteAndDataForWeekView=function(a,b,d,e){var f=AdfAgent.AGENT,g=this.getComponent();a=this._getDragSourceActivity(a,b,d);var h=!1;if(this._isAllDayRegionDisplayed()&&(g=g.getClientId(),g=AdfRichUIPeer.CreateSubId(g,AdfDhtmlCalendarPeer._ALL_DAY_CONTAINER_SUB_ID),g=f.getElementById(g),AdfAssert.assertDomElement(g),f.pointInElementBounds(g,b,d)&&(!a||a.isAllDay())))h=this._getDropSiteAndDataForAllDayWeekView(g,b,d,e);if(!h&&(!a||!a.isAllDay()))h=this._getDropSiteAndDataForTimedWeekView(b,
d,e);return h};
AdfDhtmlCalendarPeer.prototype._getDropSiteAndDataForAllDayWeekView=function(a,b,d,e){var f=AdfAgent.AGENT,g=a.childNodes,h=g.length;for(i=0;i<h;i++){a=g[i];var k=f.getAttribute(a,AdfDhtmlCalendarPeer._CALENDAR_DAY_CELL_KEY);if(null!=k&&f.pointInElementBounds(a,b,d))return b=-1!=this.getComponent().getShowActivityTypes().indexOf(AdfDhtmlCalendarPeer._ALLDAY)?AdfDhtmlCalendarPeer._ALLDAY:AdfDhtmlCalendarPeer._DURATION,e[AdfCalendarDropTarget.HINT_DROP_SITE]={date:k,timeType:b},b={},b.domElement=a,
b.bounds=f.getElementPageBounds(a),e[AdfCalendarDropTarget.HINT_DROP_SITE_DATA]=b,!0}return!1};
AdfDhtmlCalendarPeer.prototype._getDropSiteAndDataForTimedWeekView=function(a,b,d){var e=AdfAgent.AGENT,f=this._getDateTimeGridContainer(),g=f.scrollTop,f=f.firstChild.rows[0].cells[1].firstChild;if(e.pointInElementBounds(f,a,b)){var h=f.childNodes,k=h.length,l=null,f=null;for(i=0;i<k;i++){var m=h[i],n=e.getAttribute(m,AdfDhtmlCalendarPeer._CALENDAR_DAY_CELL_KEY);if(null!=n&&m.offsetTop+m.offsetHeight>g&&e.pointInElementBounds(m,a,b)){l=n;f=m;break}}if(null!=l)for(i=0;i<k;i++)if(a=h[i],g=e.getAttribute(a,
AdfDhtmlCalendarPeer._CALENDAR_TIME_SLOT_KEY),null!=g&&(m=e.getElementPosition(a),b>m.y&&b<m.y+a.offsetHeight))return d[AdfCalendarDropTarget.HINT_DROP_SITE]=this._getDropSiteForTimeSlot(l,g),b={},b.domElement=a,b.siteDayCell=f,h=e.getElementPageBounds(a),e=e.getElementPageBounds(f),b.bounds={top:h.top,left:e.left,bottom:h.bottom,right:e.right},d[AdfCalendarDropTarget.HINT_DROP_SITE_DATA]=b,!0}return!1};
AdfDhtmlCalendarPeer.prototype._getDropSiteAndDataForMonthView=function(a,b,d,e){a=AdfAgent.AGENT;var f=!1,g=this.getComponent().getClientId(),g=AdfRichUIPeer.CreateSubId(g,AdfDhtmlCalendarPeer._MONTH_GRID_ID);if((g=AdfAgent.AGENT.getElementById(g))&&a.pointInElementBounds(g,b,d))for(var h=g.childNodes,k=h.length,l=null,m=0;m<k&&!l;m++){var n=h[m];if(a.pointInElementBounds(g,b,d))for(var o=n.childNodes,p=o.length,q=0;q<p;q++){var n=o[q],s=a.getAttribute(n,AdfDhtmlCalendarPeer._CALENDAR_DAY_CELL_KEY);
if(null!=s&&a.pointInElementBounds(n,b,d)){l={};l.date=s;l.timeType="UNKNOWN";e[AdfCalendarDropTarget.HINT_DROP_SITE]=l;f={};f.domElement=n;f.bounds=a.getElementPageBounds(n);e[AdfCalendarDropTarget.HINT_DROP_SITE_DATA]=f;f=!0;break}}}return f};AdfDhtmlCalendarPeer.prototype._actionToDisplayChange=function(a,b,d,e){this._hideActivityHoverPopup();a.cancel();a.stopBubbling();AdfCalendarDisplayChangeEvent.queue(b,e,d)};
AdfDhtmlCalendarPeer.prototype._calculateMonthGridCapacity=function(a,b){var d={},e=AdfPage.PAGE.getLookAndFeel().getSkinProperty(AdfDhtmlCalendarPeer._MONTH_VIEW_ALLDAY_HT);d.activityHt=null!=e?parseFloat(e):0<a.clientHeight?a.clientHeight:b.dayHeaderHt;d.spacerHt=1.1;var e=AdfAgent.AGENT,f=e.getComputedStyle(a),g=e.getStyleProperty(f,"margin-bottom");null==g&&(g=e.getStyleProperty(f,"marginBottom"));if(null!=g){var h=g.lastIndexOf("px");-1!=h?d.spacerHt=parseFloat(g.substring(0,h)):(h=g.lastIndexOf("em"),
-1!=h&&(g=g.substring(0,h),d.spacerHt=parseFloat(g)*b._EMToPxRatio))}d.overflowHt=d.activityHt;g=e.getStyleProperty(f,"font-size");null==g&&(g=e.getStyleProperty(f,"fontSize"));null!=g&&(h=g.lastIndexOf("px"),-1!=h&&(d.overflowHt=parseFloat(g.substring(0,h))));b.activityInfo=d;b.maxNumActivities=Math.floor((b.dayCellHt-(b.dayHeaderHt+d.spacerHt+d.overflowHt))/(d.spacerHt+d.activityHt));b.activityInfo.overflowTopStr=b.dayHeaderHt+b.maxNumActivities*(b.activityInfo.activityHt+b.activityInfo.spacerHt)+
b.activityInfo.spacerHt+"px"};
AdfDhtmlCalendarPeer.prototype._calculateMonthGridInfo=function(a,b){var d={},e=AdfPage.PAGE.getLocaleContext().isRightToLeft();if(null!=a){for(var f=a.childNodes[0].childNodes,g=f.length,h=0;h<g;h++){var k=AdfAgent.AGENT.getAttribute(f[h],AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_KEY),l=AdfAgent.AGENT.getAttribute(f[h],AdfDhtmlCalendarPeer._CAL_MONTH_TIMED_ACTIVITY_WRAPPER),m=AdfAgent.AGENT.getAttribute(f[h],AdfDhtmlCalendarPeer._CAL_MONTH_OVERFLOW_LINK);if(!k&&!l&&!m){f=f[h];g=f.childNodes[0];d.dayCellHt=
f.clientHeight;d.dayHeaderHt=g.clientHeight;break}}f=a.style.top;f=parseFloat(f.substring(0,f.lastIndexOf("em")));d._EMToPxRatio=a.offsetTop/f}if(null!=b){f=b.childNodes.length;d.numDaysInWeek=f;g={};h=Array(f);for(k=0;k<f;k++)l=e?b.childNodes[k].style.right:b.childNodes[k].style.left,g[l]=k,h[k]=parseFloat(l);d.percentToIndexMap=g;d.percentArray=h;d.cellWidth=h[1]-h[0]}return d};
AdfDhtmlCalendarPeer.prototype._createOverflowLinkForMonthGrid=function(a,b,d,e){var f=AdfPage.PAGE.getLookAndFeel(),g=document.createElement("div");AdfDomUtils.addCSSClassName(g,f.getStyleClass(AdfDhtmlCalendarPeer._CAL_MONTH_OVERFLOW_LINK_WRAPPER_CLASS));AdfAgent.AGENT.setAttribute(g,AdfDhtmlCalendarPeer._CAL_MONTH_OVERFLOW_LINK,AdfDhtmlCalendarPeer._CAL_MONTH_OVERFLOW_LINK);AdfAgent.AGENT.setAttribute(g,AdfDhtmlCalendarPeer._CAL_MONTH_NUM_OVERFLOW,b);AdfAgent.AGENT.setAttribute(g,AdfDhtmlCalendarPeer._CAL_ACT_ROW_NUM,
e.maxNumActivities);a=this._getDayCellAttrValue(a,d);AdfAgent.AGENT.setAttribute(g,AdfDhtmlCalendarPeer._CALENDAR_DAY_KEY,a);a=document.createElement("a");AdfDomUtils.addCSSClassName(a,f.getStyleClass(AdfDhtmlCalendarPeer._CAL_MONTH_OVERFLOW_LINK_CLASS));a.href="#";a.onclick=this.handleMonthOverflowLinkClick;a.tabIndex=-1;b=f.getTranslatedString(AdfDhtmlCalendarPeer._CAL_MONTH_OVERFLOW_LINK_TEXT,b);a.innerHTML=b;g.appendChild(a);g.tabIndex=-1;return g};
AdfDhtmlCalendarPeer.prototype._getActivityInfo=function(a,b){if(null==a)return null;var d={};d.startDay=this._getDayIndexOfGridElem(b,a);var e;e=AdfAgent.AGENT.getAttribute(a,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_ALL_DAY_KEY)?a.style.width:a.parentNode.style.width;e=parseFloat(e.substring(0,e.lastIndexOf("%")));d.activityLength=b.numDaysInWeek;for(var f=0;f<b.numDaysInWeek;f++)if(e<=b.percentArray[f]){d.activityLength=f;break}return d};
AdfDhtmlCalendarPeer.prototype._getActivityLinkInList=function(a){var b=AdfAgent.AGENT;for(a=AdfDomUtils.getFirstChildElement(a);null!=a;){var d=AdfDomUtils.getFirstChildElement(a);if(null!=d&&null!=b.getAttribute(d,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_KEY))return d;a=AdfDomUtils.getNextElement(a)}};
AdfDhtmlCalendarPeer.prototype._getListRowWithDayLink=function(a,b){for(var d=AdfAgent.AGENT,e=b?AdfDomUtils.getNextElement(a):AdfDomUtils.getPreviousElement(a);null!=e;){if(null!=d.getAttribute(e,AdfDhtmlCalendarPeer._HAS_CALENDAR_DAY_LINK))return e;e=b?AdfDomUtils.getNextElement(e):AdfDomUtils.getPreviousElement(e)}};AdfDhtmlCalendarPeer.prototype._getDisplayChangeElement=function(a,b){return this._getParentWithAttr(a,b,AdfDhtmlCalendarPeer._CALENDAR_DAY_KEY)};
AdfDhtmlCalendarPeer.prototype._getActiveDayFromDom=function(a){a=AdfRichUIPeer.getDomElementForComponent(a);return AdfAgent.AGENT.getAttribute(a,AdfDhtmlCalendarPeer._CALENDAR_ACTIVE_DATE_KEY)};AdfDhtmlCalendarPeer.prototype._getParentActivity=function(a,b){return this._getParentWithAttr(a,b,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_KEY)};
AdfDhtmlCalendarPeer.prototype._getDayCellAttrValue=function(a,b){var d=this._getValueWithAttr(a,b,AdfDhtmlCalendarPeer._CALENDAR_DAY_CELL_KEY);return null==d?null:d};
AdfDhtmlCalendarPeer.prototype._getAllDayActFocus=function(a,b,d){a=AdfRichUIPeer.CreateSubId(a,AdfDhtmlCalendarPeer._ALL_DAY_CONTAINER_SUB_ID);a=AdfAgent.AGENT.getElementById(a);a=AdfDomUtils.getFirstChildElement(a);for(var e;null!=a;){if(null==AdfAgent.AGENT.getAttribute(a,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_KEY)){a=null;break}var f=AdfAgent.AGENT.getAttribute(a,AdfDhtmlCalendarPeer._CAL_ACT_COL_NUM);if(f==b)if(d==AdfDhtmlCalendarPeer._CAL_WEEK_FOCUS_FIRST_ALLDAY)break;else e=a;else if(f>b){a=
null;break}a=AdfDomUtils.getNextElement(a)}d==this._CAL_WEEK_FOCUS_LAST_ALLDAY&&null!=e&&(a=e);return a};AdfDhtmlCalendarPeer.prototype._getDayFocusInWeek=function(a,b){var d=AdfRichUIPeer.CreateSubId(a,AdfDhtmlCalendarPeer._CALENDAR_WEEK_HEADER_ID),d=AdfAgent.AGENT.getElementById(d);return 0>b||b>=d.childNodes.length?null:AdfDomUtils.getFirstChildElement(d.childNodes[b])};
AdfDhtmlCalendarPeer.prototype._getTimedActFocusInHourGrid=function(a,b){var d=AdfRichUIPeer.CreateSubId(a,AdfDhtmlCalendarPeer._CALENDAR_WEEK_TIMED_ACTIVITIES_CELL_SUB_ID),d=AdfAgent.AGENT.getElementById(d),d=AdfDomUtils.getFirstChildElement(d);do{if(null==d)break;var e=AdfAgent.AGENT.getAttribute(d,AdfDhtmlCalendarPeer._CAL_ACT_COL_NUM);if(null==e||e<b)d=AdfDomUtils.getNextElement(d);else{d=e==b?d.childNodes[0].childNodes[0]:null;break}}while(1);return d};
AdfDhtmlCalendarPeer.prototype._getDayFocusInMonthWeek=function(a,b,d){if(null!=a){a=AdfDomUtils.getLastChildElement(a);b=d.numDaysInWeek-1-b;for(d=0;d<b;d++)a=AdfDomUtils.getPreviousElement(a);if(null!=a)return a.childNodes[0].childNodes[0]}return null};AdfDhtmlCalendarPeer.prototype._getTimeSlotAttrValue=function(a,b){var d=this._getValueWithAttr(a,b,AdfDhtmlCalendarPeer._CALENDAR_TIME_SLOT_KEY);return null==d?null:d};AdfDhtmlCalendarPeer.prototype._getTimeSlotsPerHour=function(){return this.getComponent().getProperty(AdfDhtmlCalendarPeer._TIME_SLOTS_PER_HOUR)};
AdfDhtmlCalendarPeer.prototype._getParentWithAttr=function(a,b,d){for(;b&&b!=a;){if(1==b.nodeType&&AdfAgent.AGENT.getAttribute(b,d))return b;b=b.parentNode}return null};
AdfDhtmlCalendarPeer.prototype._getNextMonthElement=function(a,b){var d=b?AdfDomUtils.getNextElement(a):AdfDomUtils.getPreviousElement(a);null==d&&null!=AdfAgent.AGENT.getAttribute(a.parentNode,AdfDhtmlCalendarPeer._CAL_MONTH_TIMED_ACTIVITY_WRAPPER)&&(d=b?AdfDomUtils.getNextElement(a.parentNode):AdfDomUtils.getPreviousElement(a.parentNode));null!=d&&null!=AdfAgent.AGENT.getAttribute(d,AdfDhtmlCalendarPeer._CAL_MONTH_TIMED_ACTIVITY_WRAPPER)&&(d=b?AdfDomUtils.getFirstChildElement(d):AdfDomUtils.getLastChildElement(d));
return d};AdfDhtmlCalendarPeer.prototype._getOverflowLink=function(a){var b=a;AdfAgent.AGENT.getAttribute(a.parentNode,AdfDhtmlCalendarPeer._CAL_MONTH_TIMED_ACTIVITY_WRAPPER)&&(b=a.parentNode);for(;null!=(b=AdfDomUtils.getNextElement(b));)if(null!=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CAL_MONTH_OVERFLOW_LINK))return b;return null};
AdfDhtmlCalendarPeer.prototype._getDayIndexOfGridElem=function(a,b){for(var d=AdfPage.PAGE.getLocaleContext().isRightToLeft(),e=b,f;;){f=AdfAgent.AGENT.getAttribute(e,AdfDhtmlCalendarPeer._CAL_ACT_COL_NUM);if(null!=f)break;if(null!=a){var g=d?e.style.right:e.style.left;if(0<g.length){f=a.percentToIndexMap[g];break}}e=e.parentNode}return parseInt(f)};
AdfDhtmlCalendarPeer.prototype._getValueWithAttr=function(a,b,d){for(var e;b&&b!=a;){1==b.nodeType&&(e=AdfAgent.AGENT.getAttribute(b,d));if(1==b.nodeType&&e)return e;b=b.parentNode}return null};
AdfDhtmlCalendarPeer.prototype._handleKeyUpForDay=function(a,b){var d=this.getComponent().getClientId(),e;if(null!=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_KEY)){var f=null!=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_ALL_DAY_KEY);AdfKeyStroke.ARROWDOWN_KEY==a?(e=AdfDomUtils.getNextElement(b),null==e&&f&&(e=this._getTimedActFocusInHourGrid(d,0))):AdfKeyStroke.ARROWUP_KEY==a&&(e=AdfDomUtils.getPreviousElement(b),null==e&&!f&&(e=this._getAllDayActFocus(d,
null,this._CAL_WEEK_FOCUS_LAST_ALLDAY)))}return e?(AdfFocusUtils.focusElement(e),!0):!1};
AdfDhtmlCalendarPeer.prototype._handleKeyUpForList=function(a,b){var d=null!=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_KEY),e=AdfAgent.AGENT,f,g=b.parentNode.parentNode;if(d)if(AdfKeyStroke.ARROWDOWN_KEY==a||AdfKeyStroke.ARROWUP_KEY==a)g=(e=AdfKeyStroke.ARROWDOWN_KEY==a)?AdfDomUtils.getNextElement(g):AdfDomUtils.getPreviousElement(g),null!=g&&1==g.childNodes.length&&(g=e?AdfDomUtils.getNextElement(g):AdfDomUtils.getPreviousElement(g)),null!=g&&(f=this._getActivityLinkInList(g));
else{if(AdfKeyStroke.ARROWLEFT_KEY==a||AdfKeyStroke.ARROWRIGHT_KEY==a)d=AdfPage.PAGE.getLocaleContext().isRightToLeft(),!d&&AdfKeyStroke.ARROWRIGHT_KEY==a||d&&AdfKeyStroke.ARROWLEFT_KEY==a?(g=this._getListRowWithDayLink(g,!0),null!=g&&(f=AdfDomUtils.getFirstChildElement(g),f=AdfDomUtils.getFirstChildElement(AdfDomUtils.getNextElement(f)),null==f&&(f=this._getActivityLinkInList(g)))):(null==e.getAttribute(g,AdfDhtmlCalendarPeer._HAS_CALENDAR_DAY_LINK)&&(g=this._getListRowWithDayLink(g,!1)),f=AdfDomUtils.getChildElements(g)[1],
f=AdfDomUtils.getFirstChildElement(f),null==f&&(g=AdfDomUtils.getPreviousElement(g),null!=g&&(g=AdfDomUtils.getPreviousElement(g),f=this._getActivityLinkInList(g))))}else null!=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CALENDAR_DAY_KEY)&&(AdfKeyStroke.ARROWDOWN_KEY==a||AdfKeyStroke.ARROWUP_KEY==a?(g=this._getListRowWithDayLink(g,AdfKeyStroke.ARROWDOWN_KEY==a),null!=g&&(g=AdfDomUtils.getChildElements(g)[1],f=AdfDomUtils.getFirstChildElement(g))):AdfKeyStroke.ARROWRIGHT_KEY==a?(f=AdfDomUtils.getNextElement(AdfDomUtils.getNextElement(b.parentNode)),
null!=f&&(f=AdfDomUtils.getFirstChildElement(f))):AdfKeyStroke.ARROWLEFT_KEY==a&&(g=AdfDomUtils.getPreviousElement(g),null!=g&&(g=AdfDomUtils.getPreviousElement(g),f=this._getActivityLinkInList(g))));return f?(AdfFocusUtils.focusElement(f),!0):!1};
AdfDhtmlCalendarPeer.prototype._handleKeyUpForMonth=function(a,b){var d=AdfPage.PAGE.getLocaleContext().isRightToLeft(),e=this.getComponent().getClientId(),f,g=null!=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_KEY),h=null!=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CAL_MONTH_OVERFLOW_LINK),k=null!=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CALENDAR_DAY_KEY),e=AdfRichUIPeer.CreateSubId(e,AdfDhtmlCalendarPeer._MONTH_HEADER_ID),e=AdfAgent.AGENT.getElementById(e),
e=this._calculateMonthGridInfo(null,e),l=this._getDayIndexOfGridElem(e,b);if(g||h){var m=null!=AdfAgent.AGENT.getAttribute(b.parentNode,AdfDhtmlCalendarPeer._CAL_MONTH_TIMED_ACTIVITY_WRAPPER);if(AdfKeyStroke.ARROWDOWN_KEY==a)h?(f=AdfDomUtils.getNextElement(b.parentNode),f=this._getDayFocusInMonthWeek(f,l,e)):(f=this._getNextMonthElement(b,!0),null!=f&&(d=this._getDayIndexOfGridElem(e,f),d!=l?f=null:"none"==f.style.display&&(f=this._getOverflowLink(f))),null==f&&(f=AdfDomUtils.getNextElement(m?b.parentNode.parentNode:
b.parentNode),f=this._getDayFocusInMonthWeek(f,l,e)));else if(AdfKeyStroke.ARROWUP_KEY==a){d=!1;for(h=b;!d;){f=this._getNextMonthElement(h,!1);if(null==f)break;if("none"==f.style.display)h=f;else if(d=this._getDayIndexOfGridElem(e,f),d==l)d=!0;else{f=null;break}}null==f&&(f=this._getDayFocusInMonthWeek(m?b.parentNode.parentNode:b.parentNode,l,e))}else if(AdfKeyStroke.ARROWLEFT_KEY==a||AdfKeyStroke.ARROWRIGHT_KEY==a){h=AdfKeyStroke.ARROWLEFT_KEY==a&&d||AdfKeyStroke.ARROWRIGHT_KEY==a&&!d;l=this._getDayIndexOfGridElem(e,
b);g=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CAL_ACT_ROW_NUM);k=!1;for(d=b;!k;){f=this._getNextMonthElement(d,h);if(null==f)break;if("none"!=f.style.display&&(d=this._getDayIndexOfGridElem(e,f),d!=l))if(d=Math.abs(d-l),1==d){d=AdfAgent.AGENT.getAttribute(f,AdfDhtmlCalendarPeer._CAL_ACT_ROW_NUM);if(null==d){f=null;break}g==d&&(k=!0)}else if(1<d){f=null;break}d=f}null==f&&(l=h?l+1:l-1,0<=l&&l<e.numDaysInWeek&&(f=this._getDayFocusInMonthWeek(m?b.parentNode.parentNode:b.parentNode,l,e)))}}else if(k)if(AdfKeyStroke.ARROWLEFT_KEY==
a||AdfKeyStroke.ARROWRIGHT_KEY==a)l=(m=AdfKeyStroke.ARROWLEFT_KEY==a&&d||AdfKeyStroke.ARROWRIGHT_KEY==a&&!d)?l+1:l-1,0<=l&&l<e.numDaysInWeek?(f=m?AdfDomUtils.getNextElement(b.parentNode.parentNode):AdfDomUtils.getPreviousElement(b.parentNode.parentNode),f=AdfDomUtils.getFirstChildElement(f),f=AdfDomUtils.getFirstChildElement(f)):(l=l==e.numDaysInWeek&&m?AdfDomUtils.getNextElement(b.parentNode.parentNode.parentNode):AdfDomUtils.getPreviousElement(b.parentNode.parentNode.parentNode),null!=l&&(f=this._getDayFocusInMonthWeek(l,
m?0:e.numDaysInWeek-1,e)));else if(AdfKeyStroke.ARROWUP_KEY==a){if(h=AdfDomUtils.getPreviousElement(b.parentNode.parentNode.parentNode),null!=h){if(h.childNodes.length!=e.numDaysInWeek){f=AdfDomUtils.getFirstChildElement(h);null!=AdfAgent.AGENT.getAttribute(f,AdfDhtmlCalendarPeer._CAL_MONTH_TIMED_ACTIVITY_WRAPPER)&&(f=AdfDomUtils.getFirstChildElement(f));do{if(null==f)break;if(null==AdfAgent.AGENT.getAttribute(f,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_KEY)&&null==AdfAgent.AGENT.getAttribute(f,AdfDhtmlCalendarPeer._CAL_MONTH_OVERFLOW_LINK))break;
d=this._getDayIndexOfGridElem(e,f);if(d==l)"none"!=f.style.display&&(m=f);else if(d>l)break;f=this._getNextMonthElement(f,!0)}while(1)}f=null!=m?m:this._getDayFocusInMonthWeek(h,l,e)}}else if(AdfKeyStroke.ARROWDOWN_KEY==a){m=b.parentNode.parentNode.parentNode;if(m.childNodes.length!=e.numDaysInWeek){f=AdfDomUtils.getFirstChildElement(m);null!=AdfAgent.AGENT.getAttribute(f,AdfDhtmlCalendarPeer._CAL_MONTH_TIMED_ACTIVITY_WRAPPER)&&(f=AdfDomUtils.getFirstChildElement(f));do{if(null==f)break;if(null==
AdfAgent.AGENT.getAttribute(f,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_KEY)&&null==AdfAgent.AGENT.getAttribute(f,AdfDhtmlCalendarPeer._CAL_MONTH_OVERFLOW_LINK)){f=null;break}d=this._getDayIndexOfGridElem(e,f);if(d==l)break;else if(d>l){f=null;break}f=this._getNextMonthElement(f,!0)}while(1)}null==f&&(m=AdfDomUtils.getNextElement(m),null!=m&&(f=this._getDayFocusInMonthWeek(m,l,e)))}return f?(AdfFocusUtils.focusElement(f),!0):!1};
AdfDhtmlCalendarPeer.prototype._handleKeyUpForWeek=function(a,b){var d=AdfPage.PAGE.getLocaleContext().isRightToLeft(),e=this.getComponent().getClientId(),f,g,h=null!=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_KEY);f=AdfRichUIPeer.CreateSubId(e,AdfDhtmlCalendarPeer._CALENDAR_WEEK_HEADER_ID);var k=AdfAgent.AGENT.getElementById(f),k=this._calculateMonthGridInfo(null,k),l=this._getDayIndexOfGridElem(k,b);if(h)if(h=null!=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_ALL_DAY_KEY),
AdfKeyStroke.ARROWDOWN_KEY==a)g=AdfDomUtils.getNextElement(b),h&&(null!=g&&((h=null!=AdfAgent.AGENT.getAttribute(g,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_ALL_DAY_KEY))?(f=this._getDayIndexOfGridElem(k,g),f!=l&&(g=null)):g=null),null==g&&(g=this._getTimedActFocusInHourGrid(e,l)));else if(AdfKeyStroke.ARROWUP_KEY==a)g=AdfDomUtils.getPreviousElement(b),h?null!=g&&((h=null!=AdfAgent.AGENT.getAttribute(g,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_ALL_DAY_KEY))?(f=this._getDayIndexOfGridElem(k,g),f!=l&&(g=
null)):g=null):null==g&&(g=this._getAllDayActFocus(e,l,this._CAL_WEEK_FOCUS_LAST_ALLDAY)),null==g&&(g=this._getDayFocusInWeek(e,l));else{if(AdfKeyStroke.ARROWRIGHT_KEY==a||AdfKeyStroke.ARROWLEFT_KEY==a){g=(d=AdfKeyStroke.ARROWRIGHT_KEY==a&&!d||AdfKeyStroke.ARROWLEFT_KEY==a&&d)?AdfDomUtils.getNextElement(b):AdfDomUtils.getPreviousElement(b);if(h)for(h=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CAL_ACT_ROW_NUM);null!=g;){f=this._getDayIndexOfGridElem(k,g);f=Math.abs(f-l);if(1==f){f=AdfAgent.AGENT.getAttribute(g,
AdfDhtmlCalendarPeer._CAL_ACT_ROW_NUM);if(null==f){g=null;break}if(h==f)break}else if(1<f){g=null;break}g=d?AdfDomUtils.getNextElement(g):AdfDomUtils.getPreviousElement(g)}else g=this._getTimedActFocusInHourGrid(e,d?l+1:l-1);null==g&&(g=this._getDayFocusInWeek(e,d?l+1:l-1))}}else if(b.parentNode.parentNode.id==f)if(AdfKeyStroke.ARROWDOWN_KEY==a)g=this._getAllDayActFocus(e,l,AdfDhtmlCalendarPeer._CAL_WEEK_FOCUS_FIRST_ALLDAY),null==g&&(g=this._getTimedActFocusInHourGrid(e,l));else if(AdfKeyStroke.ARROWLEFT_KEY==
a||AdfKeyStroke.ARROWRIGHT_KEY==a)l=(e=AdfKeyStroke.ARROWLEFT_KEY==a&&d||AdfKeyStroke.ARROWRIGHT_KEY==a&&!d)?l+1:l-1,0<=l&&l<k.numDaysInWeek&&(g=e?AdfDomUtils.getNextElement(b.parentNode):AdfDomUtils.getPreviousElement(b.parentNode),g=AdfDomUtils.getFirstChildElement(g));return g?(AdfFocusUtils.focusElement(g),!0):!1};
AdfDhtmlCalendarPeer.prototype._hideMonthGridActivity=function(a,b,d){a.style._display=a.style.display;a.style.display="none";a=this._getActivityInfo(a,b);for(b=0;b<a.activityLength;b++){var e=d[a.startDay+b];d[a.startDay+b]=++e}};AdfDhtmlCalendarPeer.prototype._isActivityDraggableAcrossDays=function(a){return"week"==this.getComponent().getView()?null==AdfAgent.AGENT.getAttribute(a,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_DURATION_KEY):!1};
AdfDhtmlCalendarPeer.prototype._restoreScrollPosition=function(a){var b=a.getClientId(),d=AdfAgent.AGENT,e=a.getProperty(AdfDhtmlCalendarPeer._VIEW_KEY),f=null,g=null;if(e!=AdfDhtmlCalendarPeer._VIEW_MONTH){if(e==AdfDhtmlCalendarPeer._VIEW_LIST)f=AdfDhtmlCalendarPeer._SCROLL_LIST_KEY;else if(e==AdfDhtmlCalendarPeer._VIEW_DAY||e==AdfDhtmlCalendarPeer._VIEW_WEEK)f=AdfDhtmlCalendarPeer._SCROLL_DAY_KEY,g=this._getPageProperty(a,AdfDhtmlCalendarPeer._SCROLL_DAY_HEIGHT),this._setPageProperty(a,AdfDhtmlCalendarPeer._SCROLL_DAY_HEIGHT,
null);e=this._getPageProperty(a,f);this._setPageProperty(a,f,null);if(null!=e){if(f=AdfRichUIPeer.CreateSubId(b,f),f=d.getElementById(f)){var h=this._getPageProperty(a,AdfDhtmlCalendarPeer._CALENDAR_ACTIVE_DATE_KEY),k=this._getActiveDayFromDom(a);this._setPageProperty(a,AdfDhtmlCalendarPeer._CALENDAR_ACTIVE_DATE_KEY,null);k===h?(g&&(e=f.scrollHeight*e/g),f.scrollTop=e):this._scrollToStartHour(b,d)}}else this._scrollToStartHour(b,d)}};
AdfDhtmlCalendarPeer.prototype._saveScrollAndSplitterPosition=function(a){var b=a.getClientId(),d=AdfAgent.AGENT,e=a.getProperty(AdfDhtmlCalendarPeer._VIEW_KEY),f=null;if(e!=AdfDhtmlCalendarPeer._VIEW_MONTH){if(e==AdfDhtmlCalendarPeer._VIEW_LIST)f=AdfDhtmlCalendarPeer._SCROLL_LIST_KEY;else if(e==AdfDhtmlCalendarPeer._VIEW_DAY||e==AdfDhtmlCalendarPeer._VIEW_WEEK)f=AdfDhtmlCalendarPeer._SCROLL_DAY_KEY;b=AdfRichUIPeer.CreateSubId(b,f);if(d=d.getElementById(b))b=this._getActiveDayFromDom(a),this._setPageProperty(a,
AdfDhtmlCalendarPeer._CALENDAR_ACTIVE_DATE_KEY,b),AdfDomUtils.isInVisibleSubtree(d)&&(this._setPageProperty(a,f,d.scrollTop),(e==AdfDhtmlCalendarPeer._VIEW_DAY||e==AdfDhtmlCalendarPeer._VIEW_WEEK)&&this._setPageProperty(a,AdfDhtmlCalendarPeer._SCROLL_DAY_HEIGHT,d.scrollHeight))}};
AdfDhtmlCalendarPeer.prototype._scrollToStartHour=function(a,b){var d=AdfRichUIPeer.CreateSubId(a,AdfDhtmlCalendarPeer._START_HOUR_SUBID_KEY),d=b.getElementById(d),e=AdfRichUIPeer.CreateSubId(a,AdfDhtmlCalendarPeer._SCROLL_DAY_KEY);(e=b.getElementById(e))&&d&&b.scrollToPos(e,null,d.offsetTop)};AdfDhtmlCalendarPeer.prototype._getPageProperty=function(a,b){var d=a.getClientId(),e;(d=AdfPage.PAGE.getPageProperty(d))&&(e=d[b]);return e};
AdfDhtmlCalendarPeer.prototype._setPageProperty=function(a,b,d){a=a.getClientId();var e=AdfPage.PAGE,f=e.getPageProperty(a);f||(f={},e.setPageProperty(a,f));f[b]=d};
AdfDhtmlCalendarPeer.prototype._setTimeActDragInfo=function(a,b){var d=AdfAgent.AGENT;this._resizedActivity=a;this._resizedActivityContainer=a.firstChild.firstChild;this._resizedActivityInitHeight=b;this._resizedActivityInitWidth=this._resizedActivityContainer.clientWidth;this._parentDay=a.parentNode.parentNode;this._parentDayLeftBoundary=d.getElementLeft(this._parentDay);this._parentDayRightBoundary=this._parentDayLeftBoundary+this._parentDay.offsetWidth;this._activityLeftBoundary=d.getElementLeft(this._resizedActivity);
this._activityRightBoundary=this._activityLeftBoundary+this._resizedActivityInitWidth};AdfDhtmlCalendarPeer.prototype._showMonthGridActivity=function(a,b,d){a.style.display=a.style._display||"";a=this._getActivityInfo(a,b);for(b=0;b<a.activityLength;b++){var e=d[a.startDay+b];d[a.startDay+b]=--e}};AdfDhtmlCalendarPeer.prototype._isPopupVisible=function(a,b){var d=AdfAgent.AGENT.getAttribute(this.getDomElement(),b);return d?a.findComponent(d).isPopupVisible():!1};
AdfDhtmlCalendarPeer.prototype._launchPopupFacet=function(a,b){var d=AdfAgent.AGENT.getAttribute(this.getDomElement(),b);if(d){var d=a.findComponent(d),e={};e[AdfRichPopup.HINT_LAUNCH_ID]=a.getClientId();d.show(e)}};
AdfDhtmlCalendarPeer.prototype._onMouseOverTimeout=function(a){delete this._calendarActivityMouseTimeout;var b=a.componentId;a=a.activityRootId;var d=AdfPage.PAGE.findComponent(b);a=AdfAgent.AGENT.getElementById(a);if(d&&a){this.bind(d);var e=this._isPopupVisible(d,AdfDhtmlCalendarPeer._FACET_ID_ACTIVITY_DETAIL),f=this._isPopupVisible(d,AdfDhtmlCalendarPeer._FACET_ID_ACTIVITY_DELETE),g=this._isPopupVisible(d,AdfDhtmlCalendarPeer._FACET_ID_ACTIVITY_CONTEXT_MENU);if(!e&&(!f&&!g)&&(this._queueCalendarActivityEvent(d,
a,null,0,AdfDhtmlCalendarPeer._EVENT_BUTTON_NONE,AdfDhtmlCalendarPeer._EVENT_TRIGGER_HOVER),e=AdfRichUIPeer.getDomElementForComponent(d),e=AdfAgent.AGENT.getAttribute(e,AdfDhtmlCalendarPeer._FACET_ID_ACTIVITY_HOVER)))d=d.findComponent(e),e={},e[AdfRichPopup.HINT_LAUNCH_ID]=b,e[AdfDhtmlPopupHints.ALIGN_ELEMENT]=a,e[AdfDhtmlPopupHints.AUTODISMISS]=AdfDhtmlPopupHints.AUTODISMISS_MOUSEOUT,e[AdfDhtmlPopupHints.AUTODISMISS_MOUSEOUT_ID]=a.id,d.show(e)}};
AdfDhtmlCalendarPeer.prototype._killCalendarActivityMouseTimeout=function(){this._calendarActivityMouseTimeout&&(AdfPage.PAGE.cancelTimer(this._calendarActivityMouseTimeout),delete this._calendarActivityMouseTimeout)};
AdfDhtmlCalendarPeer.prototype._queueCalendarActivityEvent=function(a,b,d,e,f,g){g!=AdfDhtmlCalendarPeer._EVENT_TRIGGER_HOVER&&this._hideActivityHoverPopup();var h=this._getProviderAndActivityIdFromElement(b);AdfFocusUtils.focusElement(b);AdfCalendarActivityEvent.queue(a,h.providerId,h.activityId,d,e,f,g)};
AdfDhtmlCalendarPeer.prototype._resizeAllDayActsArea=function(){var a=AdfPage.PAGE,b=this.getComponent();if("auto"==b.getSplitterPosition()){var d=b.getClientId();this._splitterComponent=a.findComponent(this._splitterid);var b=AdfAgent.AGENT,d=AdfRichUIPeer.CreateSubId(d,AdfDhtmlCalendarPeer._ALL_DAY_CONTAINER_SUB_ID),e=b.getElementById(d);if(e){var f=b.getElementById(this._splitterid),d=Math.floor(0.4*f.offsetHeight);if(null==this._EMToPxRatio){var g=f.parentNode;this._EMToPxRatio=parseFloat(g.style.top)/
g.offsetTop}g=AdfDhtmlCalendarPeer._PADDING_AFTER_ALL_DAY_ACTIVITIES;if(e=AdfDomUtils.getChildElements(e)){var h=e.length,k=0,l=0;if(!0==this._splitterComponent.getCollapsed()){var m=AdfDomUtils.getFirstChildElement(f);m.style.visibility="hidden";m.style.display=""}for(f=0;f<h;f++){var n=e[f];if("true"==b.getAttribute(n,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_KEY)){var o=n.offsetTop;o>k&&(k=o);0==l&&(l=n.offsetHeight)}}!0==this._splitterComponent.getCollapsed()&&(m.style.display="none",m.style.visibility=
"");g+=k+l}m=Math.min(d,g);b.getPlatform()==AdfAgent.GECKO_PLATFORM&&(m=Math.max(36,m));this._splitterComponent.getSplitterPosition()!=m&&a.scheduleTimer(this,this._setSplitterPositionCallback,m,0)}}};AdfDhtmlCalendarPeer.prototype._setSplitterPositionCallback=function(a){this._splitterComponent.setProperty(AdfRichPanelSplitter.SPLITTER_POSITION,a,!1,AdfUIComponent.PROPAGATE_LOCALLY)};
AdfDhtmlCalendarPeer.prototype._resizeMonthGrid=function(a,b){var d=AdfPage.PAGE.getLocaleContext().isRightToLeft(),e=null==a||b<a,f=this.getComponent(),g=f.getClientId(),h=AdfRichUIPeer.CreateSubId(g,AdfDhtmlCalendarPeer._MONTH_GRID_ID),k=AdfAgent.AGENT.getElementById(h);if(k)for(var h=k.childNodes,l=h.length,g=AdfRichUIPeer.CreateSubId(g,AdfDhtmlCalendarPeer._MONTH_HEADER_ID),g=AdfAgent.AGENT.getElementById(g),k=this._calculateMonthGridInfo(k,g),g=0;g<l;g++){for(var m=Array(k.numDaysInWeek),n=Array(k.numDaysInWeek),
o=Array(k.numDaysInWeek),p=Array(k.numDaysInWeek),q=Array(k.numDaysInWeek),s=Array(k.numDaysInWeek),t=0;t<k.numDaysInWeek;t++)s[t]=0;for(var t=h[g],u=t.childNodes,v=u.length,w=0;w<v;w++){var z=AdfAgent.AGENT.getAttribute(u[w],AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_ALL_DAY_KEY),A,y=AdfAgent.AGENT.getAttribute(u[w],AdfDhtmlCalendarPeer._CAL_MONTH_TIMED_ACTIVITY_WRAPPER);A=AdfAgent.AGENT.getAttribute(u[w],AdfDhtmlCalendarPeer._CAL_MONTH_OVERFLOW_LINK);var B=this._getDayIndexOfGridElem(k,u[w]);if(z)A=
u[w],null==k.activityInfo&&this._calculateMonthGridCapacity(A,k);else if(y)A=u[w].childNodes[0],null==k.activityInfo&&this._calculateMonthGridCapacity(A,k);else if(A){z=AdfAgent.AGENT.getAttribute(u[w],AdfDhtmlCalendarPeer._CAL_MONTH_NUM_OVERFLOW);q[B]=z;t.removeChild(u[w]);w--;v--;continue}else m[B]=u[w];if(e)if(z)A=u[w],z=AdfAgent.AGENT.getAttribute(A,AdfDhtmlCalendarPeer._CAL_ACT_ROW_NUM),z>=k.maxNumActivities&&("none"!=A.style.display&&this._hideMonthGridActivity(A,k,s),null==n[B]&&(n[B]=A),null==
o[B]&&(o[B]=A));else{if(y){y=u[w];A=y.childNodes.length;for(var C=0,D=0;D<A;D++){var E=y.childNodes[D],z=AdfAgent.AGENT.getAttribute(E,AdfDhtmlCalendarPeer._CAL_ACT_ROW_NUM);z>=k.maxNumActivities&&("none"!=E.style.display&&this._hideMonthGridActivity(E,k,s),C++,null==o[B]&&(o[B]=E))}if(null==n[B])if(C==A)n[B]=y;else if(0<C){for(z=AdfDomUtils.getNextElement(y);null!=AdfAgent.AGENT.getAttribute(z,AdfDhtmlCalendarPeer._CAL_MONTH_OVERFLOW_LINK);)z=AdfDomUtils.getNextElement(z);n[B]=z}}}else if(z)A=u[w],
z=AdfAgent.AGENT.getAttribute(A,AdfDhtmlCalendarPeer._CAL_ACT_ROW_NUM),z<k.maxNumActivities?"none"==A.style.display&&this._showMonthGridActivity(A,k,s):(null==n[B]&&(n[B]=A),null==o[B]&&(o[B]=A));else if(y){y=u[w];A=0;C=y.childNodes.length;for(D=0;D<C;D++)E=y.childNodes[D],z=AdfAgent.AGENT.getAttribute(E,AdfDhtmlCalendarPeer._CAL_ACT_ROW_NUM),z<k.maxNumActivities?"none"==E.style.display&&this._showMonthGridActivity(E,k,s):(null==o[B]&&(o[B]=E),A++);if(null==n[B])if(A==C)n[B]=y;else if(0<A){for(z=
AdfDomUtils.getNextElement(y);null!=AdfAgent.AGENT.getAttribute(z,AdfDhtmlCalendarPeer._CAL_MONTH_OVERFLOW_LINK);)z=AdfDomUtils.getNextElement(z);n[B]=z}}}for(u=0;u<k.numDaysInWeek;u++)if(v=n[u],w=(parseInt(q[u])||0)+(parseInt(s[u])||0),0<w){z=null!=o[u];B=this._getActivityInfo(o[u],k);for(y=0;z&&y<B.activityLength;y++)if(1<(parseInt(q[u+y])||0)+(parseInt(s[u+y])||0))z=!1;y=AdfAgent.AGENT.getAttribute(o[u],AdfDhtmlCalendarPeer._CAL_ACT_ROW_NUM);if(!0==z&&y<k.maxNumActivities){o[u].style.display=o[u].style._display||
"";for(v=0;v<B.activityLength;v++)s[u+v]-=1}else{if(null==v)for(B=u-1;0<=B;B--)if(null!=p[B]){v=AdfDomUtils.getNextElement(p[B]);break}w=this._createOverflowLinkForMonthGrid(f,w,m[u],k);d?w.style.right=m[u].style.right:w.style.left=m[u].style.left;w.style.top=k.activityInfo.overflowTopStr;w.style.width=m[u].style.width;t.insertBefore(w,v);p[u]=w}}}};
AdfDhtmlCalendarPeer.prototype._showContextMenu=function(a,b,d,e,f){if(b=AdfAgent.AGENT.getAttribute(b,e))this._killCalendarActivityMouseTimeout(),this.showContextMenu(d.getNativeEvent(),b,a,f,null,a.getClientId()),d.cancel()};
AdfDhtmlCalendarPeer.prototype._handleActivityContextMenu=function(a,b,d,e){var f=this._getComponentEventSource(a);this._queueCalendarActivityEvent(f,d,null,0,AdfDhtmlCalendarPeer._EVENT_BUTTON_NONE,AdfDhtmlCalendarPeer._EVENT_TRIGGER_CONTEXT_MENU);var g=null;e&&(g=d);this._showContextMenu(f,b,a,AdfDhtmlCalendarPeer._FACET_ID_ACTIVITY_CONTEXT_MENU,g)};
AdfDhtmlCalendarPeer.prototype._handleClickEvents=function(a,b){var d=a.getNativeEventTarget();if(a.isLeftButtonPressed()&&d){var e=this._getComponentEventSource(a),f=this.getDomElement(),g=this._getDisplayChangeElement(f,d);g?(this._hideActivityHoverPopup(),d=AdfAgent.AGENT.getAttribute(g,AdfDhtmlCalendarPeer._CALENDAR_DAY_KEY),AdfCalendarDisplayChangeEvent.queue(e,d,AdfDhtmlCalendarPeer._VIEW_DAY)):(g=this._getParentActivity(f,d))&&f!=g?(this._queueCalendarActivityEvent(e,g,null,b,AdfDhtmlCalendarPeer._EVENT_BUTTON_LEFT,
AdfDhtmlCalendarPeer._EVENT_TRIGGER_MOUSE),this._launchPopupFacet(e,AdfDhtmlCalendarPeer._FACET_ID_ACTIVITY_DETAIL)):this._queueCalendarEvent(e,a,f,d,null,b,AdfDhtmlCalendarPeer._EVENT_BUTTON_LEFT,AdfDhtmlCalendarPeer._EVENT_TRIGGER_MOUSE)&&this._launchPopupFacet(e,AdfDhtmlCalendarPeer._FACET_ID_CREATE)}};
AdfDhtmlCalendarPeer.prototype._queueCalendarEvent=function(a,b,d,e,f,g,h,k){var l=this._getDayCellAttrValue(d,e),m=this._getTimeSlotAttrValue(d,e),n=e.parentNode,o=AdfAgent.AGENT.getElementPosition(n);null==m&&null!=this._getParentWithAttr(d,e,AdfDhtmlCalendarPeer._TIME_ACTIVITY_COLUMN_KEY)&&(d=AdfAgent.AGENT.getMousePosition(b.getNativeEvent()),m=d.y,d=24*this._getTimeSlotsPerHour(),d=n.offsetHeight/d,m=Math.max(m-o.y,0)/d,m=Math.round(m-0.5));if(null==l){d=AdfAgent.AGENT.getMousePosition(b.getNativeEvent());
b=n.offsetWidth/7;o=Math.max(d.x-o.x,0)/b;o=Math.round(o-0.5);6<o&&(o=6);n=n.childNodes;b=null;for(d=0;d<n.length;d++)if(e=n[d],1==e.nodeType&&(b=AdfAgent.AGENT.getAttribute(e,AdfDhtmlCalendarPeer._CALENDAR_DAY_CELL_KEY)),b&&d==o){l=b;break}}return null!=l&&void 0!=l?(o=n=null,null!=m&&(o=this._getTimeSlotsPerHour(),n=Math.round(m/o-0.5),o=m%o*(60/o)),this._hideActivityHoverPopup(),AdfCalendarEvent.queue(a,l,n,o,f,g,h,k),!0):!1};
AdfDhtmlCalendarPeer.prototype._handleTimeResizeIndicatorMouseDown=function(a){var b=a.getNativeEventTarget();a=a.getNativeEvent();var d=AdfAgent.AGENT,e=this.getComponent(),f=this.getDomElement();d.disableUserSelect(f);var g=this._getParentActivity(f,b);this._resizedActivity=g;var h=g.firstChild.firstChild;this._resizedActivityInitHeight=h.clientHeight;this._resizedActivityInitWidth=h.clientWidth;this._resizedActivityInitHeightInEM=parseFloat(h.style.height);this._EMToPxRatio=this._resizedActivityInitHeightInEM/
this._resizedActivityInitHeight;this._resizeStartY=a.clientY;this._resizeStartX=a.clientX;h.style.height=this._resizedActivityInitHeight+"px";h._newHeight=this._resizedActivityInitHeight;var k=this._dayGridCellRowsContainer;if(!k){k=this._getParentWithAttr(f,g,AdfDhtmlCalendarPeer._TIME_ACTIVITY_COLUMN_KEY);AdfAssert.assertDomElement(k);this._dayGridCellRowsContainer=k;-1==e.getShowActivityTypes().indexOf(AdfDhtmlCalendarPeer._TIME)&&e.getShowActivityTypes().indexOf(AdfDhtmlCalendarPeer._DURATION);
e=k.childNodes;for(f=0;f<e.length;f++)if(k=e[f],null!=d.getAttribute(k,AdfDhtmlCalendarPeer._CALENDAR_TIME_SLOT_KEY)){this._minIncrementSize=k.clientHeight;break}this._dateTimeGridContainer=this._getDateTimeGridContainer()}this._isActivityDraggableAcrossDays(g)&&(this._setTimeActDragInfo(g,h.clientHeight),this._gridTop=d.getElementTop(this._dateTimeGridContainer),this._gridLeftBoundary=d.getElementLeft(this._dateTimeGridContainer),this._gridRightBoundary=d.getElementLeft(this._dateTimeGridContainer)+
this._dateTimeGridContainer.clientWidth,this._deltaDays=0);this._scrollTopBeforeDrag=this._dateTimeGridContainer.scrollTop;this._resizedActivityContainer=h;g.style.zIndex=++this._nextZIndex;this._activityResizeDragCallback||(this._activityResizeDragCallback=this.createCallback(this._handleTimeActivityResizeDrag),this._activityResizeDropCallback=this.createCallback(this._handleTimeActivityResizeDrop),this._activityResizeAbortCallback=this.createCallback(this._handleTimeActivityResizeAbort));AdfPage.PAGE.startDrag(a,
this._activityResizeDragCallback,this._activityResizeDropCallback,this._activityResizeAbortCallback);b.style.cursor="default";this._activityResizeIndicator=b};
AdfDhtmlCalendarPeer.prototype._handleAlldayResizeIndicatorMouseDown=function(a){var b=a.getNativeEventTarget(),d=a.getNativeEvent(),e=AdfAgent.AGENT,f=this.getDomElement();e.disableUserSelect(f);var g=this._getParentActivity(f,b);this._resizedActivity=g;this._resizedActivityInitWidthInPercent=g.style.width;this._resizedActivityInitOffsetLeft=g.offsetLeft;this._resizeStartX=d.clientX;var h=this._getParentWithAttr(f,g,AdfDhtmlCalendarPeer._MONTH_ROW_ID);h&&(this._initMonthRowTop=e.getElementTop(h),
this._monthRowHeight=h.clientHeight,this._deltaWeeks=0);f=this._alldayContainer;f||(f=this._getComponentEventSource(a),"month"==f.getView()?f=h:(f=AdfRichUIPeer.CreateSubId(f.getClientId(),AdfDhtmlCalendarPeer._ALL_DAY_CONTAINER_SUB_ID),f=e.getElementById(f)));AdfAssert.assertDomElement(f);this._alldayContainer=f;a=Math.ceil(0.005*f.clientWidth);var h=f.clientWidth,e=e.getElementLeft(f),k=AdfPage.PAGE.getLocaleContext().isRightToLeft(),f=f.clientWidth/7,l=this._getActivityX(g,k);this._minX=this._getMinX(k,
l,f,a);this._maxX=k?e+a:e+h-a;this._alldayContainerX=e;this._dayWidth=f;this._activityX=l;this._activityEndPadding=a;AdfDomUtils.addCSSClassName(g,AdfDhtmlCalendarPeer._DRAG_END_CLASS);g.style.zIndex=++this._nextZIndex;this._alldayActivityResizeDragCallback||(this._alldayActivityResizeDragCallback=this.createCallback(this._handleAlldayActivityResizeDrag),this._alldayActivityResizeDropCallback=this.createCallback(this._handleAlldayActivityResizeDrop),this._alldayActivityResizeAbortCallback=this.createCallback(this._handleAlldayActivityResizeAbort));
AdfPage.PAGE.startDrag(d,this._alldayActivityResizeDragCallback,this._alldayActivityResizeDropCallback,this._alldayActivityResizeAbortCallback);b.style.cursor="default";this._activityResizeIndicator=b};AdfDhtmlCalendarPeer.prototype._getActivityX=function(a,b){var d=AdfAgent.AGENT;return b?d.getElementLeft(a)+resizedActivity.clientWidth:d.getElementLeft(a)};AdfDhtmlCalendarPeer.prototype._getMinX=function(a,b,d,e){return a?b-d+e:b+d-e};
AdfDhtmlCalendarPeer.prototype._getClientActivityId=function(a,b,d){a=this.getComponent().getClientId()+"::"+a+"::"+b;null!=d&&(a=a+"::"+d);return a};
AdfDhtmlCalendarPeer.prototype._handleTimeActivityResizeDrag=function(a){var b=this._resizedActivity,d=b.offsetTop,e=this._resizedActivityContainer,f=this._resizedActivityInitHeight,g=this._dayGridCellRowsContainer,h=this._minIncrementSize;this._autoscrollCalendarIfNecessary(a);var k=a.clientY;if(this._isActivityDraggableAcrossDays(b)){var l=AdfPage.PAGE.getLocaleContext().isRightToLeft(),m=AdfAgent.AGENT,n=a.clientX;if(n>=this._parentDayLeftBoundary&&n<=this._parentDayRightBoundary)b.style.width=
Math.max(this._resizedActivityInitWidth,l?this._activityRightBoundary-n:n-this._activityLeftBoundary)+"px";else{var o=m.getElementPageBounds(this._parentDay);a=this._getProviderAndActivityIdFromElement(b);var p=a.suffix;if(!l&&n<o.left||l&&n>o.right){if(null!=p&&0<p.length&&(0<p?p--:p=null,a=this._getClientActivityId(a.providerId,a.activityId,p),a=m.getElementById(a)))this._deltaDays--,b.parentNode.removeChild(b),e=a.firstChild.firstChild,null!=e._initHeight?(this._setTimeActDragInfo(a,e._initHeight),
this._resizeStartY=e._resizeStartY):(this._setTimeActDragInfo(a,h),this._resizeStartY=m.getElementTop(a)+h,e.style.height=h+"px",f=h)}else if(!l&&n>o.right&&n<this._gridRightBoundary||l&&n<o.left&&n>this._gridLeftBoundary){e._initHeight=this._resizedActivityInitHeight;l=g.scrollHeight-d;e._newHeight=l;e.style.height=l+"px";e._resizeStartY=this._resizeStartY;l=b.cloneNode(!0);p?p++:p=0;l.id=this._getClientActivityId(a.providerId,a.activityId,p);e=l.style;e.zIndex=++this._nextZIndex;e.top=0;e.left=
0;for(e=AdfDomUtils.getNextElement(b.parentNode.parentNode);null!=e;){if(null!=m.getAttribute(e,"arc")){e.firstChild.appendChild(l);break}e=AdfDomUtils.getNextElement(e)}m.elementsAdded(l);e=l.firstChild.firstChild;this._setTimeActDragInfo(l,0);this._deltaDays++;this._resizeStartY=this._gridTop-this._dateTimeGridContainer.scrollTop}}}k-=this._resizeStartY;k+=this._dateTimeGridContainer.scrollTop-this._scrollTopBeforeDrag;k=Math.ceil(k/h)*h;f+k>=h&&d+f+k<=g.offsetHeight?(b=f+k,e.style.height=b+"px",
e._newHeight=b):d+f+k>g.offsetHeight&&(b=null!=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_DURATION_KEY)?f+k:g.offsetHeight-d-2,e.style.height=b+"px",e._newHeight=b)};
AdfDhtmlCalendarPeer.prototype._handleAlldayActivityResizeDrag=function(a){var b=this._resizedActivity,d=this._alldayContainer,e=this._dayWidth,f=this._activityEndPadding,g=this._maxX,h=this._minX,k=this._activityX,l=AdfPage.PAGE.getLocaleContext().isRightToLeft(),m=0,n=a.clientX;l?(n<g?n=g:n>h&&(n=h),m=k-n):(n>g?n=g:n<h&&(n=h),m=n-k);this._resizeNewX=n;b.style.width=m+"px";if(g=this._initMonthRowTop)if(a=a.clientY,a>g+this._monthRowHeight){if(g=AdfDomUtils.getNextElement(d)){this._deltaWeeks+=1;
a=AdfAgent.AGENT;var h=b.cloneNode(!0),m=this._getProviderAndActivityIdFromElement(b),o=m.suffix;o||(o=0);52==o?o=1:o++;h.id=this._getClientActivityId(m.providerId,m.activityId,o);a.copyStyle(b,h);m=h.style;m.zIndex=++this._nextZIndex;g.appendChild(h);a.elementsAdded(g);l?(d=k-this._alldayContainerX+f,b.style.width=d+"px",m.right=".25%",k=this._getActivityX(h,l),m.width=k-n+"px"):(m.left=".25%",k=this._getActivityX(h,l),m.width=n-k+"px",d=d.clientWidth-b.offsetLeft-f,b.style.width=d+"px");this._minX=
this._getMinX(l,k,e,f);this._activityX=k;this._alldayContainer=g;this._resizedActivity=h;this._initMonthRowTop=a.getElementTop(g)}}else a<g&&(a=AdfAgent.AGENT,m=this._getProviderAndActivityIdFromElement(b),o=m.suffix,null!=o&&(o--,k=this._getClientActivityId(m.providerId,m.activityId,o),g=a.getElementById(k),!g&&0==o&&(k=this._getClientActivityId(m.providerId,m.activityId,null),g=a.getElementById(k),g||(k=this._getClientActivityId(m.providerId,m.activityId,52),g=a.getElementById(k))),g&&AdfDomUtils.isVisible(g)&&
(this._deltaWeeks-=1,h=0,k=this._getActivityX(g,l),h=l?k-n:n-k,this._minX=this._getMinX(l,k,e,f),g.width=h+"px",d.removeChild(b),b=AdfDomUtils.getPreviousElement(d),this._activityX=k,this._alldayContainer=b,this._resizedActivity=g,this._initMonthRowTop=a.getElementTop(b))))};AdfDhtmlCalendarPeer.prototype._getDateTimeGridContainer=function(){var a=this.getComponent().getClientId(),a=AdfRichUIPeer.CreateSubId(a,AdfDhtmlCalendarPeer._SCROLL_DAY_KEY);return AdfAgent.AGENT.getElementById(a)};
AdfDhtmlCalendarPeer.prototype._autoscrollCalendarIfNecessary=function(a){var b=AdfAgent.AGENT,d=this._dateTimeGridContainer;if(d.scrollHeight>d.offsetHeight&&(a=b.getMousePosition(a),b=b.getElementPosition(d),b=Math.max(a.y-b.y,0),a=b>d.offsetHeight-AdfDhtmlCalendarPeer._AUTOSCROLL_MARGIN,b<AdfDhtmlCalendarPeer._AUTOSCROLL_MARGIN||a))b=d.scrollTop+(a?this._minIncrementSize:-this._minIncrementSize),0<=b&&b<d.scrollHeight&&(d.scrollTop=b)};
AdfDhtmlCalendarPeer.prototype._handleTimeActivityResizeDrop=function(a){var b=AdfAgent.AGENT,d=this._resizedActivity,e=0,f=0,g=this._resizedActivityContainer,h=g._newHeight,f=(h-this._resizedActivityInitHeight)/this._minIncrementSize,k=this._getTimeSlotsPerHour(),e=0<f?Math.floor(f/k):Math.ceil(f/k),l=60/k,f=Math.round(f%k*l),h=h*this._EMToPxRatio;if(this._isActivityDraggableAcrossDays(d)&&!(0>this._deltaDays))if(0==this._deltaDays)d.style.width=this._resizedActivityInitWidth+"px";else{for(var e=
e+24*(this._deltaDays-1),m=d.parentNode.parentNode;0<this._deltaDays;)m=AdfDomUtils.getPreviousElement(m),null!=m&&null!=AdfAgent.AGENT.getAttribute(m,"arc")&&this._deltaDays--;if(null!=m)for(var n=this._getProviderAndActivityIdFromElement(d),m=m.firstChild.firstChild;null!=m;){var o=this._getProviderAndActivityIdFromElement(m);if(o.providerId==n.providerId&&o.activityId==n.activityId){n=(m.firstChild.firstChild._newHeight-m.firstChild.firstChild._initHeight)/this._minIncrementSize;e+=0<n?Math.floor(n/
k):Math.ceil(n/k);f+=Math.round(n%k*l);break}m=AdfDomUtils.getNextElement(m)}}this._doTimeActivityResizeCleanup(g,h);if(null!=b.getAttribute(d,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_DURATION_KEY))var p=this._getDayCellAttrValue(this.getDomElement(),d);this._queueCalendarActivityDurationChangeEvent(d,e,f,p);b.eatEvent(a)};
AdfDhtmlCalendarPeer.prototype._handleAlldayActivityResizeDrop=function(a){var b=AdfAgent.AGENT,d=this._resizedActivity,e=0,f=AdfPage.PAGE.getLocaleContext().isRightToLeft(),g=this._dayWidth,e=Math.ceil((this._resizeNewX-this._alldayContainerX)/g),h=0;f?(h=this._resizeStartX+g/2,g=Math.ceil((h-this._alldayContainerX)/g),h=g-e):(h=this._resizeStartX-g/2,g=Math.ceil((h-this._alldayContainerX)/g),h=e-g);e=0;this._initMonthRowTop&&(e=this._deltaWeeks);e=24*h+168*e;0==e&&(d.style.width=this._resizedActivityInitWidthInPercent);
this._doAlldayActivityResizeCleanup(d);this._queueCalendarActivityDurationChangeEvent(d,e,0);b.eatEvent(a)};AdfDhtmlCalendarPeer.prototype._queueCalendarActivityDurationChangeEvent=function(a,b,d,e){if(0!=b||0!=d)this._hideActivityHoverPopup(),a=this._getProviderAndActivityIdFromElement(a),AdfCalendarActivityDurationChangeEvent.queue(this.getComponent(),a.providerId,a.activityId,b,d,e)};
AdfDhtmlCalendarPeer.prototype._handleTimeActivityResizeAbort=function(){this._doTimeActivityResizeCleanup(this._resizedActivityContainer,this._resizedActivityInitHeightInEM)};AdfDhtmlCalendarPeer.prototype._handleAlldayActivityResizeAbort=function(){var a=this._resizedActivity;a.style.width=this._resizedActivityInitWidthInPercent;this._doAlldayActivityResizeCleanup(a)};AdfDhtmlCalendarPeer.prototype._doTimeActivityResizeCleanup=function(a,b){a.style.height=b+"em";this._doActivityResizeCleanup(a)};
AdfDhtmlCalendarPeer.prototype._doAlldayActivityResizeCleanup=function(a){AdfDomUtils.removeCSSClassName(a,AdfDhtmlCalendarPeer._DRAG_END_CLASS);this._doActivityResizeCleanup(a)};AdfDhtmlCalendarPeer.prototype._doActivityResizeCleanup=function(){this._alldayContainer=this._resizedActivity=null;AdfAgent.AGENT.enableUserSelect(this.getDomElement());AdfAssert.assertDomElement(this._activityResizeIndicator);this._activityResizeIndicator.style.cursor="";this._activityResizeIndicator=null};
AdfDhtmlCalendarPeer.prototype._changeCursorForMovableActivity=function(a,b){if(b&&null!=a.getDragSource()&&!this._resizedActivity){var d=a.getProperty(AdfDhtmlCalendarPeer._VIEW_KEY);if(d!=AdfDhtmlCalendarPeer._VIEW_LIST){var e=null!=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_ALL_DAY_KEY),f=null!=AdfAgent.AGENT.getAttribute(b,AdfDhtmlCalendarPeer._CALENDAR_ACTIVITY_DURATION_KEY),g=-1==a.getShowActivityTypes().indexOf(AdfDhtmlCalendarPeer._TIME);if(!f||!(g&&d==AdfDhtmlCalendarPeer._VIEW_DAY))(!e||
d!=AdfDhtmlCalendarPeer._VIEW_DAY)&&!AdfDomUtils.containsCSSClassName(b,AdfDhtmlCalendarPeer._MOVEABLE_CLASS)&&AdfDomUtils.addCSSClassName(b,AdfDhtmlCalendarPeer._MOVEABLE_CLASS)}}};AdfDhtmlCalendarPeer.prototype._hideActivityHoverPopup=function(){this._killCalendarActivityMouseTimeout();var a=AdfAgent.AGENT.getAttribute(this.getDomElement(),AdfDhtmlCalendarPeer._FACET_ID_ACTIVITY_HOVER);a&&this.getComponent().findComponent(a).hide()};
AdfDhtmlCalendarPeer.prototype._getProviderAndActivityIdFromElement=function(a){a=a.id.split("::");var b="",d="",e="",f=a.length;3<=f&&(b=a[1],d=a[2],3<f&&(e=a[3]));return{providerId:b,activityId:d,suffix:e}};AdfDhtmlCalendarPeer.prototype._getComponentEventSource=function(a){var b=this.getComponent();a=a.getSource();return a.getClientId()==this._splitterid?b:a};(      ]5]=A*_V   ^    :https://itas.oraclecorp.com/itas/afr/partition/unknown/n/default/opt/d/calendar-ASPEN-7348.js necko:classified 1 strongly-framed 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAQAAgAAAAAAAAAAAAAAAAAAAAAB4vFIJp5wRkeyPxAQ9RJGKPqbqVvKO0mKuIl8ec8o/uhmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAZXMIIGUzCCBTugAwIBAgIQA0SkBkcJHfOfYEyXPo7YCjANBgkqhkiG9w0BAQsFADBNMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMScwJQYDVQQDEx5EaWdpQ2VydCBTSEEyIFNlY3VyZSBTZXJ2ZXIgQ0EwHhcNMTkwMzExMDAwMDAwWhcNMjAwNTA5MTIwMDAwWjCBjTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFTATBgNVBAcTDFJlZHdvb2QgQ2l0eTEbMBkGA1UEChMST3JhY2xlIENvcnBvcmF0aW9uMRowGAYDVQQLExFPcmFjbGUgR0lULUVOUyBVUzEZMBcGA1UEAwwQKi5vcmFjbGVjb3JwLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAI3Wh/dT0vDahFEPaDRtW9ZT06dqYHsKLyrl5IxXTt+6xgeihqsBRjDRa8P0mzgyl8YHSivUAeYiNXMXSyOaueCSRPWpTyg/K4eKuHhJdKo/7CnFVz+LrmVt7YSf7duQDXJt6Lm2wwh36+uj7qeYAb8vEfUp5MiF8p6brVK+flMTiFOL98xeye3NkN8SrShwE5fEiEpdpoCisiHtMN86zJ+U9rDaQrh4Y1Zcclaj/waw6bWAdoT3bLy+AZLMi3tdBpvDDRvsjgP5uVNGtgdLSQBFxeBeQGwyAZwxyHkC2ya/oI/w0RloiMweRcXN8PqEMaZ5EpaX5TVg1LFuTTtuhe8CAwEAAaOCAuwwggLoMB8GA1UdIwQYMBaAFA+AYRyCMWHVLyjnjUY4tCzhxtniMB0GA1UdDgQWBBRde0AeCaEcgi7KnzjK5q/ZuybqBTArBgNVHREEJDAighAqLm9yYWNsZWNvcnAuY29tgg5vcmFjbGVjb3JwLmNvbTAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMGsGA1UdHwRkMGIwL6AtoCuGKWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9zc2NhLXNoYTItZzYuY3JsMC+gLaArhilodHRwOi8vY3JsNC5kaWdpY2VydC5jb20vc3NjYS1zaGEyLWc2LmNybDBMBgNVHSAERTBDMDcGCWCGSAGG/WwBATAqMCgGCCsGAQUFBwIBFhxodHRwczovL3d3dy5kaWdpY2VydC5jb20vQ1BTMAgGBmeBDAECAjB8BggrBgEFBQcBAQRwMG4wJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBGBggrBgEFBQcwAoY6aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0U0hBMlNlY3VyZVNlcnZlckNBLmNydDAJBgNVHRMEAjAAMIIBBAYKKwYBBAHWeQIEAgSB9QSB8gDwAHcAu9nfvB+KcbWTlCOXqpJ7RzhXlQqrUugakJZkNo4e0YUAAAFpbrOPSwAABAMASDBGAiEAvu40L2p0w35ylTAGNxDS7cUqD8MjdrBa/zl9SVFTgBQCIQCsHx51KQsLUbnpesUwy7/FetQcumtU2vUfdgz06DNkXgB1AId1v+dZfPiMQ5lfvfNu/1aNR1Y2/0q1YMG06v9eoIMPAAABaW6zkJIAAAQDAEYwRAIgXnTtAQEXnqAEWCEsjZZAcvS26zisCfG/py8UjBxM4FoCIGHAnCYYNAYAKhxBVDdtMhZV5wKsMl/cCpZDw/uKZ9plMA0GCSqGSIb3DQEBCwUAA4IBAQA5xgV+7SUXK3WKVqsdF3Cw8vk3tWLHNmIjGukW4s/FuZvEudpIRycZmnuB1nAz3Fy6pjyLjJtLz5xso58tm/YIgVys3tV6Lwyv7WXh7X4laPpwxm6aw5UaN2D+UGFHjQnc9lsyWmQXkmC/TafJZFxtP7RYiHfSsOOG2fVS8XPKuYZCziVZxSHu/P+Vt9JgA84d2rd6XtdfMYHCY3JVHYZlNLwD9xnHhBqlXhhbeh0CPMxjL/v1ec0zj6jWIiHGEaG8ubtDyqb+bRubcYmiYm+iQux1xCyodfffsG8sdj115DVMEIv0aY+c09wzttfV9bro7/PVErmaBQoh+j70+9WVADkDAwAAAAABAQAAAAAAAARub25lAAAAEFJTQS1QS0NTMS1TSEEyNTYAAAA= request-method GET response-head HTTP/1.1 200 OK
Date: Mon, 09 Dec 2019 22:10:04 GMT
Server: Oracle-Application-Server-11g
Cache-Control: Public
Expires: Sun, 06 Dec 2020 22:10:04 GMT
Last-Modified: Thu, 14 Dec 2017 13:17:12 GMT
X-ORACLE-DMS-ECID: 005aKmcN8Up6iKQqu^n3EH0002rj001Xs3
X-Powered-By: JSF/2.0
Content-Type: application/x-javascript
Content-Language: en
 original-response-headers Date: Mon, 09 Dec 2019 22:10:04 GMT
Server: Oracle-Application-Server-11g
Cache-Control: Public
Expires: Sun, 06 Dec 2020 22:10:04 GMT
Last-Modified: Thu, 14 Dec 2017 13:17:12 GMT
X-ORACLE-DMS-ECID: 005aKmcN8Up6iKQqu^n3EH0002rj001Xs3
X-Powered-By: JSF/2.0
Keep-Alive: timeout=5, max=96
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: application/x-javascript
Content-Language: en
 uncompressed-len 0 net-response-time-onstart 6756 net-response-time-onstop 7165  &S